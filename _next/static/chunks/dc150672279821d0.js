(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56563,e=>{"use strict";let t="lot_platform_maps",s="lot_platform_lots",a="lot_platform_purchases",l=e=>JSON.stringify(e,(e,t)=>t instanceof Date?t.toISOString():t),r=e=>JSON.parse(e,(e,t)=>"string"==typeof t&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(t)?new Date(t):t),o=()=>{let e=localStorage.getItem(t);return e?r(e):[]},n=()=>{let e=localStorage.getItem(s);return e?r(e):[]};e.s(["deleteLot",0,e=>{let t=n().filter(t=>t.id!==e);localStorage.setItem(s,l(t))},"deleteMap",0,e=>{let a=o().filter(t=>t.id!==e);localStorage.setItem(t,l(a));let r=n().filter(t=>t.mapId!==e);localStorage.setItem(s,l(r))},"getLots",0,n,"getLotsByMapId",0,e=>n().filter(t=>t.mapId===e),"getMapById",0,e=>o().find(t=>t.id===e),"getMaps",0,o,"saveLot",0,e=>{let t=n(),a=t.findIndex(t=>t.id===e.id);a>=0?t[a]=e:t.push(e),localStorage.setItem(s,l(t))},"saveMap",0,e=>{let s=o(),a=s.findIndex(t=>t.id===e.id);a>=0?s[a]=e:s.push(e);try{let e=l(s);localStorage.setItem(t,e)}catch(e){if(console.error("Erro ao salvar mapa:",e),e instanceof DOMException&&"QuotaExceededError"===e.name)throw Error("Arquivo muito grande para o localStorage. Use uma imagem menor ou de menor qualidade.");throw e}},"savePurchaseRequest",0,e=>{let t,s=(t=localStorage.getItem(a))?r(t):[];s.push(e),localStorage.setItem(a,l(s))}])},73297,31886,e=>{"use strict";var t,s=((t={}).AVAILABLE="available",t.RESERVED="reserved",t.SOLD="sold",t);e.s(["LotStatus",()=>s],73297);var a=e.i(43476),l=e.i(71645);function r({imageUrl:e,lots:t,onLotClick:r,isEditMode:o=!1,onAreaDrawn:n,selectedLotId:i}){let d=(0,l.useRef)(null),c=(0,l.useRef)(null),m=(0,l.useRef)(null),[x,g]=(0,l.useState)([]),[u,h]=(0,l.useState)(null),[p,b]=(0,l.useState)(!1),[f,y]=(0,l.useState)(1),[v,j]=(0,l.useState)({x:0,y:0}),[N,w]=(0,l.useState)(!1),[S,E]=(0,l.useState)({x:0,y:0}),C=l.default.useCallback(()=>{let e=d.current,a=c.current;if(!e||!a||!p)return;let l=e.getContext("2d");l&&(l.imageSmoothingEnabled=!0,l.imageSmoothingQuality="high",l.clearRect(0,0,e.width,e.height),l.save(),l.translate(v.x,v.y),l.scale(f,f),l.drawImage(a,0,0),t.forEach(e=>{((e,t,a,l)=>{if(t.area.points.length<3)return;e.beginPath(),e.moveTo(t.area.points[0].x,t.area.points[0].y),t.area.points.forEach(t=>{e.lineTo(t.x,t.y)}),e.closePath();let r="rgba(34, 197, 94, 0.3)",o="#22c55e";t.status===s.RESERVED?(r="rgba(251, 191, 36, 0.3)",o="#fbbf24"):t.status===s.SOLD&&(r="rgba(239, 68, 68, 0.3)",o="#ef4444"),a&&(r=r.replace("0.3","0.5"),o="#000"),l&&(r="rgba(59, 130, 246, 0.5)",o="#3b82f6"),e.fillStyle=r,e.fill(),e.strokeStyle=o,e.lineWidth=a||l?3:2,e.stroke()})(l,e,e.id===u?.id,e.id===i)}),o&&x.length>0&&(l.beginPath(),l.moveTo(x[0].x,x[0].y),x.forEach(e=>{l.lineTo(e.x,e.y)}),l.strokeStyle="#3b82f6",l.lineWidth=2/f,l.stroke(),x.forEach(e=>{l.beginPath(),l.arc(e.x,e.y,5/f,0,2*Math.PI),l.fillStyle="#3b82f6",l.fill()})),l.restore())},[p,t,x,u,i,o,f,v]);(0,l.useEffect)(()=>{let t=d.current,s=c.current;if(!t||!s)return;let a=t.getContext("2d");a&&(s.onload=()=>{let e=window.devicePixelRatio||1;if(t.width=s.naturalWidth,t.height=s.naturalHeight,e>1){let s=t.width,l=t.height;t.width=s*e,t.height=l*e,t.style.width=`${s}px`,t.style.height=`${l}px`,a.scale(e,e)}b(!0)},s.src=e)},[e]),(0,l.useEffect)(()=>{C()},[C]);let L=(e,t,s)=>{let a=!1;for(let l=0,r=s.length-1;l<s.length;r=l++){let o=s[l].x,n=s[l].y,i=s[r].x,d=s[r].y;n>t!=d>t&&e<(i-o)*(t-n)/(d-n)+o&&(a=!a)}return a},R=e=>{let t=d.current;if(!t)return{x:0,y:0};let s=t.getBoundingClientRect(),a=t.width/s.width,l=t.height/s.height,r=(e.clientX-s.left)*a,o=(e.clientY-s.top)*l;return{x:(r-v.x)/f,y:(o-v.y)/f}},I=()=>{w(!1),d.current&&(d.current.style.cursor="default")};return(0,l.useEffect)(()=>{let e=d.current;if(!e)return;let t=t=>{t.preventDefault();let s=e.getBoundingClientRect(),a=t.clientX-s.left,l=t.clientY-s.top;if(a<0||a>s.width||l<0||l>s.height)return;let r=e.width/s.width,o=e.height/s.height,n=a*r,i=l*o,d=t.deltaY>0?-.1:.1;y(e=>{let t=Math.min(Math.max(.5,e+d),5),s=t/e;return j(e=>({x:n-(n-e.x)*s,y:i-(i-e.y)*s})),t})};return e.addEventListener("wheel",t,{passive:!1}),()=>{e.removeEventListener("wheel",t)}},[]),(0,a.jsxs)("div",{ref:m,className:"relative",children:[(0,a.jsx)("img",{ref:c,src:e,alt:"Map",className:"hidden"}),(0,a.jsx)("canvas",{ref:d,onClick:e=>{if(N)return;let{x:s,y:a}=R(e);if(o)g([...x,{x:s,y:a}]);else{let e=t.find(e=>L(s,a,e.area.points));e&&r&&r(e)}},onMouseMove:e=>{let s=d.current;if(!s)return;if(N){let t=e.clientX-S.x,s=e.clientY-S.y;j(e=>({x:e.x+t,y:e.y+s})),E({x:e.clientX,y:e.clientY});return}if(o)return;let{x:a,y:l}=R(e),r=t.find(e=>L(a,l,e.area.points));h(r||null),r?s.style.cursor="pointer":s.style.cursor="default"},onMouseDown:e=>{2===e.button&&(e.preventDefault(),w(!0),E({x:e.clientX,y:e.clientY}),d.current&&(d.current.style.cursor="grabbing"))},onMouseUp:I,onMouseLeave:I,onContextMenu:e=>{e.preventDefault()},className:"max-w-full h-auto border border-gray-300 rounded-lg"}),(0,a.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[(0,a.jsx)("button",{onClick:()=>y(e=>Math.min(e+.2,5)),className:"bg-white hover:bg-gray-50 text-gray-800 font-bold py-2 px-3 rounded-lg shadow-lg border border-gray-200 transition-all hover:shadow-xl",title:"Zoom In",children:"+"}),(0,a.jsx)("button",{onClick:()=>y(e=>Math.max(e-.2,.5)),className:"bg-white hover:bg-gray-50 text-gray-800 font-bold py-2 px-3 rounded-lg shadow-lg border border-gray-200 transition-all hover:shadow-xl",title:"Zoom Out",children:"−"}),(0,a.jsx)("button",{onClick:()=>{y(1),j({x:0,y:0})},className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold py-2 px-3 rounded-lg shadow-lg border border-gray-200 text-xs transition-all hover:shadow-xl",title:"Reset Zoom",children:"100%"})]}),o&&x.length>0&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{x.length>=3&&n&&(n({points:x}),g([]))},className:"px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 shadow-lg transition-all hover:shadow-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:shadow-none",disabled:x.length<3,children:["Finalizar Área (",x.length," pontos)"]}),(0,a.jsx)("button",{onClick:()=>{g([])},className:"px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 shadow-lg transition-all hover:shadow-xl",children:"Cancelar"})]}),u&&!o&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-white p-4 rounded-lg shadow-xl border border-gray-200",children:[(0,a.jsxs)("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:["Lote ",u.lotNumber]}),(0,a.jsxs)("p",{className:"text-sm text-gray-700 mb-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Status:"})," ",(0,a.jsx)("span",{className:u.status===s.AVAILABLE?"font-semibold text-green-700":u.status===s.RESERVED?"font-semibold text-amber-700":"font-semibold text-red-700",children:u.status===s.AVAILABLE?"Disponível":u.status===s.RESERVED?"Reservado":"Vendido"})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-700 mb-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Área:"})," ",u.size,"m²"]}),(0,a.jsxs)("p",{className:"text-base font-bold text-gray-900 mt-2",children:["R$ ",u.price.toLocaleString("pt-BR")]})]})]})}e.s(["default",()=>r],31886)},31713,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(73297),l=e.i(56563),r=e.i(31886);function o({lot:e,onClose:r,onSuccess:o}){let[n,i]=(0,s.useState)({customerName:"",customerEmail:"",customerPhone:"",customerCPF:"",message:""});return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Manifestar Interesse - Lote ",e.lotNumber]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Área"}),(0,t.jsxs)("p",{className:"font-bold text-gray-900",children:[e.size,"m²"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Preço"}),(0,t.jsxs)("p",{className:"font-bold text-gray-900",children:["R$ ",e.price.toLocaleString("pt-BR")]})]})]}),e.description&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),(0,t.jsx)("p",{className:"text-sm text-gray-800",children:e.description})]}),e.features&&e.features.length>0&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Características"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.features.map((e,s)=>(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:e},s))})]})]}),(0,t.jsxs)("form",{onSubmit:t=>{t.preventDefault();let s={id:Date.now().toString(),lotId:e.id,...n,status:"pending",createdAt:new Date};(0,l.savePurchaseRequest)(s);let r={...e,status:a.LotStatus.RESERVED,updatedAt:new Date};(0,l.saveLot)(r),o()},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Nome Completo *"}),(0,t.jsx)("input",{type:"text",required:!0,value:n.customerName,onChange:e=>i({...n,customerName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Seu nome completo"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Email *"}),(0,t.jsx)("input",{type:"email",required:!0,value:n.customerEmail,onChange:e=>i({...n,customerEmail:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"seu@email.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Telefone *"}),(0,t.jsx)("input",{type:"tel",required:!0,value:n.customerPhone,onChange:e=>i({...n,customerPhone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(00) 00000-0000"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"CPF"}),(0,t.jsx)("input",{type:"text",value:n.customerCPF,onChange:e=>i({...n,customerCPF:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"000.000.000-00"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Mensagem"}),(0,t.jsx)("textarea",{value:n.message,onChange:e=>i({...n,message:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:4,placeholder:"Deixe uma mensagem ou dúvida"})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsx)("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold shadow-md transition-all hover:shadow-lg",children:"Enviar Interesse"}),(0,t.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-semibold shadow-md transition-all hover:shadow-lg",children:"Cancelar"})]})]})]})})})}function n(){let[e,n]=(0,s.useState)([]),[i,d]=(0,s.useState)(null),[c,m]=(0,s.useState)(null),[x,g]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!0),[p,b]=(0,s.useState)(0);(0,s.useEffect)(()=>{let e=(0,l.getMaps)();n(e),e.length>0&&d(e[0]),h(!1)},[]);let f=(0,s.useMemo)(()=>!i||u?[]:(0,l.getLots)().filter(e=>e.mapId===i.id),[i,u,p]),y=f.filter(e=>e.status===a.LotStatus.AVAILABLE).length,v=f.filter(e=>e.status===a.LotStatus.RESERVED).length,j=f.filter(e=>e.status===a.LotStatus.SOLD).length;return u?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Chácara Jardim Ypiranga"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Encontre o lote perfeito para você. Clique nos lotes disponíveis para mais informações."})]})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Carregando mapas..."})})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Chácara Jardim Ypiranga"}),(0,t.jsx)("p",{className:"text-gray-700 mt-2",children:"Encontre o lote perfeito para você. Clique nos lotes disponíveis para mais informações."})]})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[e.length>1&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Selecione o Mapa"}),(0,t.jsx)("select",{value:i?.id||"",onChange:t=>{d(e.find(e=>e.id===t.target.value)||null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:e.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))})]}),i&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-3",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,t.jsx)(r.default,{imageUrl:i.imageUrl,lots:f,onLotClick:e=>{e.status===a.LotStatus.AVAILABLE&&(m(e),g(!0))}})})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Estatísticas"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded"}),(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"Disponíveis"})]}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:y})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"Reservados"})]}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:v})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded"}),(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"Vendidos"})]}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:j})]}),(0,t.jsx)("div",{className:"pt-3 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"Total"}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:f.length})]})})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Legenda"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded opacity-50"}),(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"Disponível para compra"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded opacity-50"}),(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"Reservado"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded opacity-50"}),(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"Vendido"})]})]}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,t.jsx)("p",{className:"text-sm text-gray-700",children:"Passe o mouse sobre os lotes para ver informações. Clique nos lotes disponíveis para manifestar interesse."})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Contato"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm text-gray-800",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{className:"text-gray-900",children:"Email:"})," contato@chacaraypiranga.com"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{className:"text-gray-900",children:"Telefone:"})," (00) 0000-0000"]}),(0,t.jsx)("p",{className:"text-gray-700 mt-4",children:"Entre em contato para mais informações sobre os lotes disponíveis."})]})]})]})]}),0===e.length&&(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-600 text-lg",children:"Nenhum mapa disponível no momento."})})]}),x&&c&&(0,t.jsx)(o,{lot:c,onClose:()=>{g(!1),m(null)},onSuccess:()=>{g(!1),b(e=>e+1),alert("Seu interesse foi registrado com sucesso! O lote foi reservado. Entraremos em contato em breve."),m(null)}})]})}e.s(["default",()=>n],31713)}]);