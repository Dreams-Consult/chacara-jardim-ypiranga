(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},73297,e=>{"use strict";var t,r=((t={}).AVAILABLE="available",t.RESERVED="reserved",t.SOLD="sold",t);e.s(["LotStatus",()=>r])},31886,e=>{"use strict";var t=e.i(43476),r=e.i(73297),a=e.i(71645);function s({imageUrl:e,lots:s,onLotClick:l,isEditMode:n=!1,onAreaDrawn:o,selectedLotId:i}){let{canvasRef:d,imageRef:c,containerRef:u,hoveredLot:m,drawingPoints:h,scale:g,handleCanvasClick:p,handleCanvasMouseMove:f,handleMouseDown:x,handleMouseUp:b,handleContextMenu:y,handleZoomIn:v,handleZoomOut:j,handleResetZoom:N,handleFinishDrawing:w,handleCancelDrawing:E}=function({imageUrl:e,lots:t,onLotClick:s,isEditMode:l=!1,onAreaDrawn:n,selectedLotId:o}){let i=(0,a.useRef)(null),d=(0,a.useRef)(null),c=(0,a.useRef)(null),[u,m]=(0,a.useState)([]),[h,g]=(0,a.useState)(null),[p,f]=(0,a.useState)(!1),[x,b]=(0,a.useState)(1),[y,v]=(0,a.useState)({x:0,y:0}),[j,N]=(0,a.useState)(!1),[w,E]=(0,a.useState)({x:0,y:0}),P=(0,a.useCallback)(()=>{let e=i.current,a=d.current;if(!e||!a||!p)return;let s=e.getContext("2d");s&&(s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.clearRect(0,0,e.width,e.height),s.save(),s.translate(y.x,y.y),s.scale(x,x),s.drawImage(a,0,0),t.forEach(e=>{((e,t,a,s)=>{if(t.area.points.length<3)return;e.beginPath(),e.moveTo(t.area.points[0].x,t.area.points[0].y),t.area.points.forEach(t=>{e.lineTo(t.x,t.y)}),e.closePath();let l="rgba(34, 197, 94, 0.3)",n="#22c55e";t.status===r.LotStatus.RESERVED?(l="rgba(251, 191, 36, 0.3)",n="#fbbf24"):t.status===r.LotStatus.SOLD&&(l="rgba(239, 68, 68, 0.3)",n="#ef4444"),a&&(l=l.replace("0.3","0.5"),n="#000"),s&&(l="rgba(59, 130, 246, 0.5)",n="#3b82f6"),e.fillStyle=l,e.fill(),e.strokeStyle=n,e.lineWidth=a||s?3:2,e.stroke()})(s,e,e.id===h?.id,e.id===o)}),l&&u.length>0&&(s.beginPath(),s.moveTo(u[0].x,u[0].y),u.forEach(e=>{s.lineTo(e.x,e.y)}),s.strokeStyle="#3b82f6",s.lineWidth=2/x,s.stroke(),u.forEach(e=>{s.beginPath(),s.arc(e.x,e.y,5/x,0,2*Math.PI),s.fillStyle="#3b82f6",s.fill()})),s.restore())},[p,t,u,h,o,l,x,y]);(0,a.useEffect)(()=>{let t=i.current,r=d.current;if(!t||!r||!e||""===e.trim())return;let a=()=>{t.width=r.naturalWidth,t.height=r.naturalHeight,f(!0)},s=()=>{console.error("Erro ao carregar imagem do mapa")};return r.addEventListener("load",a),r.addEventListener("error",s),r.src=e,()=>{r.removeEventListener("load",a),r.removeEventListener("error",s)}},[e]),(0,a.useEffect)(()=>{P()},[P]);let C=(e,t,r)=>{let a=!1;for(let s=0,l=r.length-1;s<r.length;l=s++){let n=r[s].x,o=r[s].y,i=r[l].x,d=r[l].y;o>t!=d>t&&e<(i-n)*(t-o)/(d-o)+n&&(a=!a)}return a},S=e=>{let t=i.current;if(!t)return{x:0,y:0};let r=t.getBoundingClientRect(),a=e.clientX-r.left,s=e.clientY-r.top,l=t.width/r.width,n=t.height/r.height;return{x:(a*l-y.x)/x,y:(s*n-y.y)/x}},L=(0,a.useCallback)(e=>{e.preventDefault();let t=e.deltaY>0?-.1:.1;b(e=>Math.max(.5,Math.min(e+t,5)))},[]);return(0,a.useEffect)(()=>{let e=i.current;if(e)return e.addEventListener("wheel",L,{passive:!1}),()=>{e.removeEventListener("wheel",L)}},[L]),{canvasRef:i,imageRef:d,containerRef:c,hoveredLot:h,drawingPoints:u,scale:x,handleCanvasClick:e=>{if(j)return;let{x:r,y:a}=S(e);if(l)m([...u,{x:r,y:a}]);else{let e=t.find(e=>C(r,a,e.area.points));e&&s&&s(e)}},handleCanvasMouseMove:e=>{let r=i.current;if(!r)return;if(j){let t=r.getBoundingClientRect(),a=r.width/t.width,s=r.height/t.height,l=(e.clientX-w.x)*a,n=(e.clientY-w.y)*s;v(e=>({x:e.x+l,y:e.y+n})),E({x:e.clientX,y:e.clientY});return}if(l)return;let{x:a,y:s}=S(e),n=t.find(e=>C(a,s,e.area.points));g(n||null),n?r.style.cursor="pointer":r.style.cursor="default"},handleMouseDown:e=>{2===e.button&&(e.preventDefault(),N(!0),E({x:e.clientX,y:e.clientY}),i.current&&(i.current.style.cursor="grabbing"))},handleMouseUp:()=>{N(!1),i.current&&(i.current.style.cursor="default")},handleContextMenu:e=>{e.preventDefault()},handleZoomIn:()=>{b(e=>Math.min(e+.2,5))},handleZoomOut:()=>{b(e=>Math.max(e-.2,.5))},handleResetZoom:()=>{b(1),v({x:0,y:0})},handleFinishDrawing:()=>{u.length>=3&&n&&(n({points:u}),m([]))},handleCancelDrawing:()=>{m([])}}}({imageUrl:e,lots:s,onLotClick:l,isEditMode:n,onAreaDrawn:o,selectedLotId:i});return(0,t.jsxs)("div",{ref:u,className:"relative",children:[e&&""!==e.trim()?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{ref:c,src:e,alt:"Map",className:"hidden"}),(0,t.jsx)("canvas",{ref:d,onClick:p,onMouseMove:f,onMouseDown:x,onMouseUp:b,onMouseLeave:b,onContextMenu:y,className:"border border-gray-300 rounded-lg shadow-lg cursor-crosshair max-w-full"})]}):(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center bg-gray-50",children:[(0,t.jsx)("svg",{className:"w-24 h-24 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("p",{className:"text-gray-600 font-medium mb-2",children:"Nenhuma imagem do mapa carregada"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Adicione uma imagem ao mapa para comeÃ§ar a desenhar os lotes"})]}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[(0,t.jsx)("button",{onClick:v,className:"bg-white hover:bg-gray-50 text-gray-800 font-bold py-2 px-3 rounded-lg shadow-lg border border-gray-200 transition-all hover:shadow-xl",title:"Zoom In",children:"+"}),(0,t.jsx)("button",{onClick:j,className:"bg-white hover:bg-gray-50 text-gray-800 font-bold py-2 px-3 rounded-lg shadow-lg border border-gray-200 transition-all hover:shadow-xl",title:"Zoom Out",children:"-"}),(0,t.jsx)("button",{onClick:N,className:"bg-white hover:bg-gray-50 text-gray-800 font-medium py-2 px-3 rounded-lg shadow-lg border border-gray-200 transition-all hover:shadow-xl text-xs",title:"Reset Zoom",children:"Reset"}),(0,t.jsxs)("div",{className:"bg-white px-3 py-1 rounded-lg shadow-lg border border-gray-200 text-xs text-gray-700 text-center",children:[Math.round(100*g),"%"]})]}),n&&h.length>0&&(0,t.jsxs)("div",{className:"absolute bottom-4 left-4 flex gap-2",children:[(0,t.jsxs)("button",{onClick:w,className:"px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 shadow-lg transition-all hover:shadow-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:shadow-none",disabled:h.length<3,children:["Finalizar Ãrea (",h.length," pontos)"]}),(0,t.jsx)("button",{onClick:E,className:"px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 shadow-lg transition-all hover:shadow-xl",children:"Cancelar"})]}),m&&!n&&(0,t.jsxs)("div",{className:"absolute top-4 left-4 bg-white p-4 rounded-lg shadow-xl border border-gray-200",children:[(0,t.jsxs)("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:["Lote ",m.lotNumber]}),(0,t.jsxs)("p",{className:"text-sm text-gray-700 mb-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Status:"})," ",(0,t.jsx)("span",{className:m.status===r.LotStatus.AVAILABLE?"font-semibold text-green-700":m.status===r.LotStatus.RESERVED?"font-semibold text-amber-700":"font-semibold text-red-700",children:m.status===r.LotStatus.AVAILABLE?"DisponÃ­vel":m.status===r.LotStatus.RESERVED?"Reservado":"Vendido"})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-700 mb-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Ãrea:"})," ",m.size,"mÂ²"]}),(0,t.jsxs)("p",{className:"text-base font-bold text-gray-900 mt-2",children:["R$ ",m.price.toLocaleString("pt-BR")]})]})]})}e.s(["default",()=>s],31886)},98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={assign:function(){return i},searchParamsToUrlQuery:function(){return l},urlQueryToSearchParams:function(){return o}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});function l(e){let t={};for(let[r,a]of e.entries()){let e=t[r];void 0===e?t[r]=a:Array.isArray(e)?e.push(a):t[r]=[e,a]}return t}function n(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,n(e));else t.set(r,n(a));return t}function i(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,a]of r.entries())e.append(t,a)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={formatUrl:function(){return o},formatWithValidation:function(){return d},urlObjectKeys:function(){return i}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let l=e.r(90809)._(e.r(98183)),n=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:r}=e,a=e.protocol||"",s=e.pathname||"",o=e.hash||"",i=e.query||"",d=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?d=t+e.host:r&&(d=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(d+=":"+e.port)),i&&"object"==typeof i&&(i=String(l.urlQueryToSearchParams(i)));let c=e.search||i&&`?${i}`||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||n.test(a))&&!1!==d?(d="//"+(d||""),s&&"/"!==s[0]&&(s="/"+s)):d||(d=""),o&&"#"!==o[0]&&(o="#"+o),c&&"?"!==c[0]&&(c="?"+c),s=s.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${a}${d}${s}${c}${o}`}let i=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function d(e){return o(e)}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return s}});let a=e.r(71645);function s(e,t){let r=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=l(e,a)),t&&(s.current=l(t,a))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={DecodeError:function(){return x},MiddlewareNotFoundError:function(){return j},MissingStaticPage:function(){return v},NormalizeError:function(){return b},PageNotFoundError:function(){return y},SP:function(){return p},ST:function(){return f},WEB_VITALS:function(){return l},execOnce:function(){return n},getDisplayName:function(){return u},getLocationOrigin:function(){return d},getURL:function(){return c},isAbsoluteUrl:function(){return i},isResSent:function(){return m},loadGetInitialProps:function(){return g},normalizeRepeatedSlashes:function(){return h},stringifyError:function(){return N}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let l=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>o.test(e);function d(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=d();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function h(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function g(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await g(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&m(r))return a;if(!a)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let p="undefined"!=typeof performance,f=p&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class x extends Error{}class b extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class j extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return l}});let a=e.r(18967),s=e.r(52817);function l(e){if(!(0,a.isAbsoluteUrl)(e))return!0;try{let t=(0,a.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,s.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return x},useLinkStatus:function(){return y}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let l=e.r(90809),n=e.r(43476),o=l._(e.r(71645)),i=e.r(95057),d=e.r(8372),c=e.r(18581),u=e.r(18967),m=e.r(5550);e.r(33525);let h=e.r(91949),g=e.r(73668),p=e.r(65165);function f(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}function x(t){var r;let a,s,l,[i,x]=(0,o.useOptimistic)(h.IDLE_LINK_STATUS),y=(0,o.useRef)(null),{href:v,as:j,children:N,prefetch:w=null,passHref:E,replace:P,shallow:C,scroll:S,onClick:L,onMouseEnter:A,onTouchStart:$,legacyBehavior:R=!1,onNavigate:k,ref:I,unstable_dynamicOnHover:M,...O}=t;a=N,R&&("string"==typeof a||"number"==typeof a)&&(a=(0,n.jsx)("a",{children:a}));let D=o.default.useContext(d.AppRouterContext),T=!1!==w,_=!1!==w?null===(r=w)||"auto"===r?p.FetchStrategy.PPR:p.FetchStrategy.Full:p.FetchStrategy.PPR,{href:F,as:U}=o.default.useMemo(()=>{let e=f(v);return{href:e,as:j?f(j):e}},[v,j]);if(R){if(a?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});s=o.default.Children.only(a)}let V=R?s&&"object"==typeof s&&s.ref:I,B=o.default.useCallback(e=>(null!==D&&(y.current=(0,h.mountLinkInstance)(e,F,D,_,T,x)),()=>{y.current&&((0,h.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,h.unmountPrefetchableInstance)(e)}),[T,F,D,_,x]),q={ref:(0,c.useMergedRef)(B,V),onClick(t){R||"function"!=typeof L||L(t),R&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(t),!D||t.defaultPrevented||function(t,r,a,s,l,n,i){if("undefined"!=typeof window){let d,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((d=t.currentTarget.getAttribute("target"))&&"_self"!==d||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,g.isLocalURL)(r)){l&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),i){let e=!1;if(i({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(99781);o.default.startTransition(()=>{u(a||r,l?"replace":"push",n??!0,s.current)})}}(t,F,U,y,P,S,k)},onMouseEnter(e){R||"function"!=typeof A||A(e),R&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),D&&T&&(0,h.onNavigationIntent)(e.currentTarget,!0===M)},onTouchStart:function(e){R||"function"!=typeof $||$(e),R&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),D&&T&&(0,h.onNavigationIntent)(e.currentTarget,!0===M)}};return(0,u.isAbsoluteUrl)(U)?q.href=U:R&&!E&&("a"!==s.type||"href"in s.props)||(q.href=(0,m.addBasePath)(U)),l=R?o.default.cloneElement(s,q):(0,n.jsx)("a",{...O,...q,children:a}),(0,n.jsx)(b.Provider,{value:i,children:l})}e.r(84508);let b=(0,o.createContext)(h.IDLE_LINK_STATUS),y=()=>(0,o.useContext)(b);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},31713,e=>{"use strict";var t=e.i(43476),r=e.i(22016),a=e.i(31886),s=e.i(71645);e.i(47167);var l=e.i(81949);let n=e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`${t.slice(0,3)}.${t.slice(3)}`:t.length<=9?`${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6)}`:`${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6,9)}-${t.slice(9,11)}`},o=e=>{let t=e.replace(/\D/g,"");if("99999999998"===t)return!0;if(11!==t.length||/^(\d)\1{10}$/.test(t))return!1;let r=0;for(let e=0;e<9;e++)r+=parseInt(t.charAt(e))*(10-e);let a=11-r%11;if(a>=10&&(a=0),a!==parseInt(t.charAt(9)))return!1;r=0;for(let e=0;e<10;e++)r+=parseInt(t.charAt(e))*(11-e);return(a=11-r%11)>=10&&(a=0),a===parseInt(t.charAt(10))};function i({lot:e,onClose:r,onSuccess:a}){let{formData:i,setFormData:d,isSubmitting:c,error:u,handleSubmit:m}=function(e,t){let[r,a]=(0,s.useState)({customerName:"",customerEmail:"",customerPhone:"",customerCPF:"",message:"",sellerName:"",sellerEmail:"",sellerPhone:"",sellerCPF:""}),[n,o]=(0,s.useState)(!1),[i,d]=(0,s.useState)(null),c=e=>{let t=e.replace(/\D/g,"");if("99999999998"===t)return!0;if(11!==t.length||/^(\d)\1{10}$/.test(t))return!1;let r=0;for(let e=0;e<9;e++)r+=parseInt(t.charAt(e))*(10-e);let a=11-r%11;if(a>=10&&(a=0),a!==parseInt(t.charAt(9)))return!1;r=0;for(let e=0;e<10;e++)r+=parseInt(t.charAt(e))*(11-e);return(a=11-r%11)>=10&&(a=0),a===parseInt(t.charAt(10))},u=async a=>{if(a.preventDefault(),o(!0),d(null),!r.customerCPF||!c(r.customerCPF)){d("CPF do cliente Ã© obrigatÃ³rio e deve ser vÃ¡lido."),o(!1);return}if(!r.sellerCPF||!c(r.sellerCPF)){d("CPF do vendedor Ã© obrigatÃ³rio e deve ser vÃ¡lido."),o(!1);return}try{console.log(`[usePurchaseForm] ðŸ” Verificando disponibilidade do lote ${e.id}...`);let a=await l.default.get(`http://localhost:5678/webhook/mapas/lotes/valido?idLote=${e.id}`);if(0===a.data.isAvailable){d("Este lote nÃ£o estÃ¡ mais disponÃ­vel. Por favor, escolha outro lote."),o(!1),console.log(`[usePurchaseForm] âŒ Lote ${e.id} n\xe3o est\xe1 dispon\xedvel`);return}console.log(`[usePurchaseForm] âœ… Lote ${e.id} est\xe1 dispon\xedvel, prosseguindo com a reserva...`);let s={lot:{id:e.id,mapId:e.mapId,lotNumber:e.lotNumber,area:e.area,status:"reserved",price:e.price,size:e.size,description:e.description,features:e.features,createdAt:e.createdAt,updatedAt:e.updatedAt},customer:{name:r.customerName,email:r.customerEmail,phone:r.customerPhone,cpf:r.customerCPF,message:r.message||null},seller:{name:r.sellerName,email:r.sellerEmail,phone:r.sellerPhone,cpf:r.sellerCPF},purchaseRequest:{id:Date.now().toString(),lotId:e.id,status:"pending",createdAt:new Date().toISOString()}},n=await l.default.post("http://localhost:5678/webhook/mapas/lotes/reservar",s,{headers:{"Content-Type":"application/json"},timeout:1e4});console.log("[usePurchaseForm] âœ… Reserva enviada com sucesso:",n.data),t()}catch(e){console.error("[usePurchaseForm] âŒ Erro ao enviar reserva:",e),l.default.isAxiosError(e)?e.response?409===e.response.status||e.response.data?.message?.includes("disponÃ­vel")?d("Este lote nÃ£o estÃ¡ mais disponÃ­vel. Por favor, escolha outro lote."):d(`Erro do servidor: ${e.response.data?.message||e.response.statusText}`):e.request?d("NÃ£o foi possÃ­vel conectar ao servidor. Verifique sua conexÃ£o."):d("Erro ao preparar requisiÃ§Ã£o."):d("Erro inesperado ao enviar reserva."),o(!1)}};return{formData:r,setFormData:a,isSubmitting:n,error:i,handleSubmit:u}}(e,a),[h,g]=s.default.useState(""),[p,f]=s.default.useState("");return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Manifestar Interesse - Lote ",e.lotNumber]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Ãrea"}),(0,t.jsxs)("p",{className:"font-bold text-gray-900",children:[e.size,"mÂ²"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"PreÃ§o"}),(0,t.jsxs)("p",{className:"font-bold text-gray-900",children:["R$ ",e.price.toLocaleString("pt-BR")]})]})]}),e.description&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"DescriÃ§Ã£o"}),(0,t.jsx)("p",{className:"text-sm text-gray-800",children:e.description})]}),e.features&&e.features.length>0&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"CaracterÃ­sticas"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.features.map((e,r)=>(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:e},r))})]})]}),u&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,t.jsxs)("p",{className:"text-red-800 text-sm font-medium",children:["âŒ ",u]})}),(0,t.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Nome Completo *"}),(0,t.jsx)("input",{type:"text",required:!0,value:i.customerName,onChange:e=>d({...i,customerName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Seu nome completo"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Email *"}),(0,t.jsx)("input",{type:"email",required:!0,value:i.customerEmail,onChange:e=>d({...i,customerEmail:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"seu@email.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Telefone *"}),(0,t.jsx)("input",{type:"tel",required:!0,value:i.customerPhone,onChange:e=>{let t=e.target.value.replace(/\D/g,""),r=t;r=t.length<=2?t:t.length<=6?`(${t.slice(0,2)}) ${t.slice(2)}`:t.length<=10?`(${t.slice(0,2)}) ${t.slice(2,6)}-${t.slice(6)}`:`(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7,11)}`,d({...i,customerPhone:r})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(00) 00000-0000",maxLength:15})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"CPF *"}),(0,t.jsx)("input",{type:"text",required:!0,value:i.customerCPF,onChange:e=>{let t=n(e.target.value);d({...i,customerCPF:t}),14===t.length?o(t)?g(""):g("CPF invÃ¡lido"):g("")},className:`w-full px-3 py-2 border rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${h?"border-red-500":"border-gray-300"}`,placeholder:"000.000.000-00",maxLength:14}),h&&(0,t.jsxs)("p",{className:"text-red-600 text-sm mt-1",children:["âŒ ",h]})]}),(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"ðŸ“‹ InformaÃ§Ãµes do Vendedor"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Preencha as informaÃ§Ãµes do vendedor/corretor responsÃ¡vel pela venda"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Nome do Vendedor *"}),(0,t.jsx)("input",{type:"text",required:!0,value:i.sellerName||"",onChange:e=>d({...i,sellerName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome completo do vendedor"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Email do Vendedor *"}),(0,t.jsx)("input",{type:"email",required:!0,value:i.sellerEmail||"",onChange:e=>d({...i,sellerEmail:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"email@vendedor.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Telefone do Vendedor *"}),(0,t.jsx)("input",{type:"tel",required:!0,value:i.sellerPhone||"",onChange:e=>{let t=e.target.value.replace(/\D/g,""),r=t;r=t.length<=2?t:t.length<=6?`(${t.slice(0,2)}) ${t.slice(2)}`:t.length<=10?`(${t.slice(0,2)}) ${t.slice(2,6)}-${t.slice(6)}`:`(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7,11)}`,d({...i,sellerPhone:r})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(00) 00000-0000",maxLength:15})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"CPF do Vendedor *"}),(0,t.jsx)("input",{type:"text",required:!0,value:i.sellerCPF||"",onChange:e=>{let t=n(e.target.value);d({...i,sellerCPF:t}),14===t.length?o(t)?f(""):f("CPF invÃ¡lido"):f("")},className:`w-full px-3 py-2 border rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${p?"border-red-500":"border-gray-300"}`,placeholder:"000.000.000-00",maxLength:14}),p&&(0,t.jsxs)("p",{className:"text-red-600 text-sm mt-1",children:["âŒ ",p]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Mensagem"}),(0,t.jsx)("textarea",{value:i.message,onChange:e=>d({...i,message:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:4,placeholder:"Deixe uma mensagem ou dÃºvida"})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsx)("button",{type:"submit",disabled:c||""!==h||""!==p,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold shadow-md transition-all hover:shadow-lg disabled:bg-gray-400 disabled:cursor-not-allowed disabled:hover:shadow-md",children:c?"Enviando...":"Enviar Interesse"}),(0,t.jsx)("button",{type:"button",onClick:r,disabled:c,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-semibold shadow-md transition-all hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"})]})]})]})})})}var d=e.i(73297);let c="http://localhost:5678/webhook";function u(){let{maps:e,lots:n,selectedMap:o,selectedLot:u,showPurchaseModal:m,isLoading:h,availableLotsCount:g,reservedLotsCount:p,soldLotsCount:f,handleLotClick:x,handlePurchaseSuccess:b,handlePurchaseClose:y,selectMap:v}=(()=>{let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)([]),[n,o]=(0,s.useState)(null),i=(0,s.useRef)(null),[u,m]=(0,s.useState)(null),[h,g]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!0),[x,b]=(0,s.useState)(!1),[y,v]=(0,s.useState)(0);(0,s.useEffect)(()=>{(async()=>{try{console.log("Buscando mapas da API...");let e=(await l.default.get(`${c}/mapas`)).data;if(console.log("Resposta da API /mapas:",e),Array.isArray(e)&&e.length>0){let r=e.filter(e=>e&&e.mapId).map(e=>({id:e.mapId,name:e.name||`Mapa ${e.mapId}`,imageUrl:e.imageUrl||"",imageType:e.imageType||"image/png",width:e.width||800,height:e.height||600,createdAt:new Date,updatedAt:new Date}));if(console.log(`${r.length} mapas carregados`),t(r),i.current)console.log(`Mantendo mapa selecionado: ${i.current}`),await j(i.current);else if(r.length>0){let e=r[0];o(e),i.current=e.id,await j(e.id)}}else console.log("Nenhum mapa retornado pela API"),t([]),a([]),o(null)}catch(e){console.error("Erro ao buscar mapas:",e),t([]),a([]),o(null)}finally{f(!1)}})()},[y]);let j=async e=>{b(!0);try{console.log(`Buscando lotes do mapa ${e}...`);let t=(await l.default.get(`${c}/mapas/lotes`,{params:{mapId:e},timeout:1e4})).data[0];if(console.log("Resposta da API /mapas/lotes:",t),t&&Array.isArray(t.lots)){let r=t.lots.map(r=>({...r,mapId:t.mapId||e,createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt)}));console.log(`${r.length} lotes carregados para o mapa ${e}`),a(r)}else console.log("Nenhum lote encontrado para o mapa",e),a([])}catch(e){console.error("Erro ao carregar lotes do mapa:",e),a([])}finally{b(!1)}},N=(0,s.useCallback)(e=>{e.status===d.LotStatus.AVAILABLE&&(m(e),g(!0))},[]),w=(0,s.useCallback)(()=>{g(!1),v(e=>e+1),alert("Seu interesse foi registrado com sucesso! O lote foi reservado. Entraremos em contato em breve."),m(null)},[]),E=(0,s.useCallback)(()=>{g(!1),m(null)},[]),P=r.filter(e=>e.status===d.LotStatus.AVAILABLE).length,C=r.filter(e=>e.status===d.LotStatus.RESERVED).length,S=r.filter(e=>e.status===d.LotStatus.SOLD).length,L=(0,s.useCallback)(async t=>{console.log(`Selecionando mapa ${t}...`);let r=e.find(e=>e.id===t);o(r||null),i.current=r?t:null,r?await j(t):a([])},[e]);return{maps:e,lots:r,selectedMap:n,selectedLot:u,showPurchaseModal:h,isLoading:p,isLoadingLots:x,availableLotsCount:P,reservedLotsCount:C,soldLotsCount:S,handleLotClick:N,handlePurchaseSuccess:w,handlePurchaseClose:E,selectMap:L}})();return h?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Loteamento"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Encontre o lote perfeito para vocÃª. Clique nos lotes disponÃ­veis para mais informaÃ§Ãµes."})]})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Carregando mapas..."})})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Loteamento"}),(0,t.jsx)("p",{className:"text-gray-700 mt-2",children:"Encontre o lote perfeito para vocÃª. Clique nos lotes disponÃ­veis para mais informaÃ§Ãµes."})]})}),1===e.length&&"1762192028364"===e[0].id&&(0,t.jsx)("div",{className:"bg-yellow-50 border-b border-yellow-200",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-3",children:(0,t.jsxs)("p",{className:"text-yellow-800 text-sm",children:[(0,t.jsx)("strong",{children:"Modo de DemonstraÃ§Ã£o:"})," VocÃª estÃ¡ visualizando dados de exemplo. Para acessar a Ã¡rea administrativa, visite"," ",(0,t.jsx)(r.default,{href:"/admin/maps",className:"underline font-semibold hover:text-yellow-900",children:"/admin/maps"})]})})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[e.length>1&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Selecione o Mapa"}),(0,t.jsx)("select",{value:o?.id||"",onChange:e=>v(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:e.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))})]}),o&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-3",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,t.jsx)(a.default,{imageUrl:o.imageUrl,lots:n,onLotClick:x})})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"EstatÃ­sticas"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded"}),(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"DisponÃ­veis"})]}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:g})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"Reservados"})]}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:p})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded"}),(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"Vendidos"})]}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:f})]}),(0,t.jsx)("div",{className:"pt-3 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"Total"}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:n.length})]})})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Legenda"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded opacity-50"}),(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"DisponÃ­vel para compra"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded opacity-50"}),(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"Reservado"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded opacity-50"}),(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"Vendido"})]})]}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,t.jsx)("p",{className:"text-sm text-gray-700",children:"Passe o mouse sobre os lotes para ver informaÃ§Ãµes. Clique nos lotes disponÃ­veis para manifestar interesse."})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Contato"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm text-gray-800",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{className:"text-gray-900",children:"Email:"})," contato@chacaraypiranga.com"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{className:"text-gray-900",children:"Telefone:"})," (00) 0000-0000"]}),(0,t.jsx)("p",{className:"text-gray-700 mt-4",children:"Entre em contato para mais informaÃ§Ãµes sobre os lotes disponÃ­veis."})]})]})]})]}),0===e.length&&(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-600 text-lg",children:"Nenhum mapa disponÃ­vel no momento."})})]}),m&&u&&(0,t.jsx)(i,{lot:u,onClose:y,onSuccess:b})]})}e.s(["default",()=>u],31713)}]);