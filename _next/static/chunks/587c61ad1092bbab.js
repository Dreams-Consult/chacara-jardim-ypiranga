(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},56563,73297,e=>{"use strict";var t,r=((t={}).AVAILABLE="available",t.RESERVED="reserved",t.SOLD="sold",t);e.s(["LotStatus",()=>r],73297);let n="lot_platform_maps",o="lot_platform_lots",a="lot_platform_purchases",l="lot_platform_initialized",i=e=>JSON.stringify(e,(e,t)=>t instanceof Date?t.toISOString():t),s=e=>JSON.parse(e,(e,t)=>"string"==typeof t&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(t)?new Date(t):t),u=()=>{(()=>{if(localStorage.getItem(l))return;let e={id:"1762192028364",name:"Mapa de Exemplo - Chácara Jardim Ypiranga",description:"Mapa de exemplo para testes. Substitua pela imagem real.",imageUrl:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjQwMCIgeT0iMzAwIiBmb250LXNpemU9IjI0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjOTk5Ij5NYXBhIGRlIEV4ZW1wbG88L3RleHQ+PC9zdmc+",imageType:"image",width:800,height:600,createdAt:new Date("2024-11-03T10:00:00"),updatedAt:new Date("2024-11-03T10:00:00")},t=[{id:"1",mapId:"1762192028364",lotNumber:"1",area:{points:[{x:100,y:100},{x:200,y:100},{x:200,y:200},{x:100,y:200}]},size:250,price:5e4,status:r.AVAILABLE,description:"Lote de exemplo 1",createdAt:new Date("2024-11-03T10:00:00"),updatedAt:new Date("2024-11-03T10:00:00")},{id:"2",mapId:"1762192028364",lotNumber:"2",area:{points:[{x:220,y:100},{x:320,y:100},{x:320,y:200},{x:220,y:200}]},size:250,price:55e3,status:r.AVAILABLE,description:"Lote de exemplo 2",createdAt:new Date("2024-11-03T10:00:00"),updatedAt:new Date("2024-11-03T10:00:00")},{id:"3",mapId:"1762192028364",lotNumber:"3",area:{points:[{x:100,y:220},{x:200,y:220},{x:200,y:320},{x:100,y:320}]},size:250,price:52e3,status:r.RESERVED,description:"Lote de exemplo 3",createdAt:new Date("2024-11-03T10:00:00"),updatedAt:new Date("2024-11-03T10:00:00")}];localStorage.setItem(n,i([e])),localStorage.setItem(o,i(t)),localStorage.setItem(a,i([])),localStorage.setItem(l,"true"),console.log("Dados de exemplo inicializados com sucesso!")})();let e=localStorage.getItem(n);return e?s(e):[]},c=()=>{let e=localStorage.getItem(o);return e?s(e):[]};e.s(["deleteLot",0,e=>{let t=c().filter(t=>t.id!==e);localStorage.setItem(o,i(t))},"deleteMap",0,e=>{let t=u().filter(t=>t.id!==e);localStorage.setItem(n,i(t));let r=c().filter(t=>t.mapId!==e);localStorage.setItem(o,i(r))},"getLots",0,c,"getLotsByMapId",0,e=>c().filter(t=>t.mapId===e),"getMapById",0,e=>u().find(t=>t.id===e),"getMaps",0,u,"saveLot",0,e=>{let t=c(),r=t.findIndex(t=>t.id===e.id);r>=0?t[r]=e:t.push(e),localStorage.setItem(o,i(t))},"saveMap",0,e=>{let t=u(),r=t.findIndex(t=>t.id===e.id);r>=0?t[r]=e:t.push(e);try{let e=i(t);localStorage.setItem(n,e)}catch(e){if(console.error("Erro ao salvar mapa:",e),e instanceof DOMException&&"QuotaExceededError"===e.name)throw Error("Arquivo muito grande para o localStorage. Use uma imagem menor ou de menor qualidade.");throw e}},"savePurchaseRequest",0,e=>{let t,r=(t=localStorage.getItem(a))?s(t):[];r.push(e),localStorage.setItem(a,i(r))}],56563)},31886,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(73297);function o({imageUrl:e,lots:o,onLotClick:a,isEditMode:l=!1,onAreaDrawn:i,selectedLotId:s}){let u=(0,r.useRef)(null),c=(0,r.useRef)(null),d=(0,r.useRef)(null),[f,p]=(0,r.useState)([]),[h,g]=(0,r.useState)(null),[m,y]=(0,r.useState)(!1),[b,x]=(0,r.useState)(1),[v,S]=(0,r.useState)({x:0,y:0}),[E,w]=(0,r.useState)(!1),[I,j]=(0,r.useState)({x:0,y:0}),L=r.default.useCallback(()=>{let e=u.current,t=c.current;if(!e||!t||!m)return;let r=e.getContext("2d");r&&(r.imageSmoothingEnabled=!0,r.imageSmoothingQuality="high",r.clearRect(0,0,e.width,e.height),r.save(),r.translate(v.x,v.y),r.scale(b,b),r.drawImage(t,0,0),o.forEach(e=>{((e,t,r,o)=>{if(t.area.points.length<3)return;e.beginPath(),e.moveTo(t.area.points[0].x,t.area.points[0].y),t.area.points.forEach(t=>{e.lineTo(t.x,t.y)}),e.closePath();let a="rgba(34, 197, 94, 0.3)",l="#22c55e";t.status===n.LotStatus.RESERVED?(a="rgba(251, 191, 36, 0.3)",l="#fbbf24"):t.status===n.LotStatus.SOLD&&(a="rgba(239, 68, 68, 0.3)",l="#ef4444"),r&&(a=a.replace("0.3","0.5"),l="#000"),o&&(a="rgba(59, 130, 246, 0.5)",l="#3b82f6"),e.fillStyle=a,e.fill(),e.strokeStyle=l,e.lineWidth=r||o?3:2,e.stroke()})(r,e,e.id===h?.id,e.id===s)}),l&&f.length>0&&(r.beginPath(),r.moveTo(f[0].x,f[0].y),f.forEach(e=>{r.lineTo(e.x,e.y)}),r.strokeStyle="#3b82f6",r.lineWidth=2/b,r.stroke(),f.forEach(e=>{r.beginPath(),r.arc(e.x,e.y,5/b,0,2*Math.PI),r.fillStyle="#3b82f6",r.fill()})),r.restore())},[m,o,f,h,s,l,b,v]);(0,r.useEffect)(()=>{let t=u.current,r=c.current;t&&r&&t.getContext("2d")&&(r.onload=()=>{t.width=r.naturalWidth,t.height=r.naturalHeight,y(!0)},r.src=e)},[e]),(0,r.useEffect)(()=>{L()},[L]);let P=(e,t,r)=>{let n=!1;for(let o=0,a=r.length-1;o<r.length;a=o++){let l=r[o].x,i=r[o].y,s=r[a].x,u=r[a].y;i>t!=u>t&&e<(s-l)*(t-i)/(u-i)+l&&(n=!n)}return n},R=e=>{let t=u.current;if(!t)return{x:0,y:0};let r=t.getBoundingClientRect(),n=e.clientX-r.left,o=e.clientY-r.top,a=t.width/r.width,l=t.height/r.height;return{x:(n*a-v.x)/b,y:(o*l-v.y)/b}},N=()=>{w(!1),u.current&&(u.current.style.cursor="default")};return(0,r.useEffect)(()=>{let e=u.current;if(!e)return;let t=t=>{t.preventDefault();let r=e.getBoundingClientRect(),n=t.clientX-r.left,o=t.clientY-r.top;if(n<0||n>r.width||o<0||o>r.height)return;let a=e.width/r.width,l=e.height/r.height,i=n*a,s=o*l,u=t.deltaY>0?-.1:.1;x(e=>{let t=Math.min(Math.max(.5,e+u),5),r=t/e;return S(e=>({x:i-(i-e.x)*r,y:s-(s-e.y)*r})),t})};return e.addEventListener("wheel",t,{passive:!1}),()=>{e.removeEventListener("wheel",t)}},[]),(0,t.jsxs)("div",{ref:d,className:"relative",children:[(0,t.jsx)("img",{ref:c,src:e,alt:"Map",className:"hidden"}),(0,t.jsx)("canvas",{ref:u,onClick:e=>{if(E)return;let{x:t,y:r}=R(e);if(l)p([...f,{x:t,y:r}]);else{let e=o.find(e=>P(t,r,e.area.points));e&&a&&a(e)}},onMouseMove:e=>{let t=u.current;if(!t)return;if(E){let r=t.getBoundingClientRect(),n=t.width/r.width,o=t.height/r.height,a=(e.clientX-I.x)*n,l=(e.clientY-I.y)*o;S(e=>({x:e.x+a,y:e.y+l})),j({x:e.clientX,y:e.clientY});return}if(l)return;let{x:r,y:n}=R(e),a=o.find(e=>P(r,n,e.area.points));g(a||null),a?t.style.cursor="pointer":t.style.cursor="default"},onMouseDown:e=>{2===e.button&&(e.preventDefault(),w(!0),j({x:e.clientX,y:e.clientY}),u.current&&(u.current.style.cursor="grabbing"))},onMouseUp:N,onMouseLeave:N,onContextMenu:e=>{e.preventDefault()},className:"max-w-full h-auto border border-gray-300 rounded-lg"}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[(0,t.jsx)("button",{onClick:()=>x(e=>Math.min(e+.2,5)),className:"bg-white hover:bg-gray-50 text-gray-800 font-bold py-2 px-3 rounded-lg shadow-lg border border-gray-200 transition-all hover:shadow-xl",title:"Zoom In",children:"+"}),(0,t.jsx)("button",{onClick:()=>x(e=>Math.max(e-.2,.5)),className:"bg-white hover:bg-gray-50 text-gray-800 font-bold py-2 px-3 rounded-lg shadow-lg border border-gray-200 transition-all hover:shadow-xl",title:"Zoom Out",children:"−"}),(0,t.jsx)("button",{onClick:()=>{x(1),S({x:0,y:0})},className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold py-2 px-3 rounded-lg shadow-lg border border-gray-200 text-xs transition-all hover:shadow-xl",title:"Reset Zoom",children:"100%"})]}),l&&f.length>0&&(0,t.jsxs)("div",{className:"absolute top-4 left-4 flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>{f.length>=3&&i&&(i({points:f}),p([]))},className:"px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 shadow-lg transition-all hover:shadow-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:shadow-none",disabled:f.length<3,children:["Finalizar Área (",f.length," pontos)"]}),(0,t.jsx)("button",{onClick:()=>{p([])},className:"px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 shadow-lg transition-all hover:shadow-xl",children:"Cancelar"})]}),h&&!l&&(0,t.jsxs)("div",{className:"absolute top-4 left-4 bg-white p-4 rounded-lg shadow-xl border border-gray-200",children:[(0,t.jsxs)("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:["Lote ",h.lotNumber]}),(0,t.jsxs)("p",{className:"text-sm text-gray-700 mb-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Status:"})," ",(0,t.jsx)("span",{className:h.status===n.LotStatus.AVAILABLE?"font-semibold text-green-700":h.status===n.LotStatus.RESERVED?"font-semibold text-amber-700":"font-semibold text-red-700",children:h.status===n.LotStatus.AVAILABLE?"Disponível":h.status===n.LotStatus.RESERVED?"Reservado":"Vendido"})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-700 mb-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Área:"})," ",h.size,"m²"]}),(0,t.jsxs)("p",{className:"text-base font-bold text-gray-900 mt-2",children:["R$ ",h.price.toLocaleString("pt-BR")]})]})]})}e.s(["default",()=>o])},98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={assign:function(){return s},searchParamsToUrlQuery:function(){return a},urlQueryToSearchParams:function(){return i}};for(var o in n)Object.defineProperty(r,o,{enumerable:!0,get:n[o]});function a(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function l(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,l(e));else t.set(r,l(n));return t}function s(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,n]of r.entries())e.append(t,n)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={formatUrl:function(){return i},formatWithValidation:function(){return u},urlObjectKeys:function(){return s}};for(var o in n)Object.defineProperty(r,o,{enumerable:!0,get:n[o]});let a=e.r(90809)._(e.r(98183)),l=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:r}=e,n=e.protocol||"",o=e.pathname||"",i=e.hash||"",s=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:r&&(u=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(u+=":"+e.port)),s&&"object"==typeof s&&(s=String(a.urlQueryToSearchParams(s)));let c=e.search||s&&`?${s}`||"";return n&&!n.endsWith(":")&&(n+=":"),e.slashes||(!n||l.test(n))&&!1!==u?(u="//"+(u||""),o&&"/"!==o[0]&&(o="/"+o)):u||(u=""),i&&"#"!==i[0]&&(i="#"+i),c&&"?"!==c[0]&&(c="?"+c),o=o.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${n}${u}${o}${c}${i}`}let s=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function u(e){return i(e)}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return o}});let n=e.r(71645);function o(e,t){let r=(0,n.useRef)(null),o=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=o.current;t&&(o.current=null,t())}else e&&(r.current=a(e,n)),t&&(o.current=a(t,n))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return y},MiddlewareNotFoundError:function(){return S},MissingStaticPage:function(){return v},NormalizeError:function(){return b},PageNotFoundError:function(){return x},SP:function(){return g},ST:function(){return m},WEB_VITALS:function(){return a},execOnce:function(){return l},getDisplayName:function(){return d},getLocationOrigin:function(){return u},getURL:function(){return c},isAbsoluteUrl:function(){return s},isResSent:function(){return f},loadGetInitialProps:function(){return h},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return E}};for(var o in n)Object.defineProperty(r,o,{enumerable:!0,get:n[o]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function l(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,s=e=>i.test(e);function u(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=u();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function h(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&f(r))return n;if(!n)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let g="undefined"!=typeof performance,m=g&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class y extends Error{}class b extends Error{}class x extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class S extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function E(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return a}});let n=e.r(18967),o=e.r(52817);function a(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,o.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return y},useLinkStatus:function(){return x}};for(var o in n)Object.defineProperty(r,o,{enumerable:!0,get:n[o]});let a=e.r(90809),l=e.r(43476),i=a._(e.r(71645)),s=e.r(95057),u=e.r(8372),c=e.r(18581),d=e.r(18967),f=e.r(5550);e.r(33525);let p=e.r(91949),h=e.r(73668),g=e.r(65165);function m(e){return"string"==typeof e?e:(0,s.formatUrl)(e)}function y(t){var r;let n,o,a,[s,y]=(0,i.useOptimistic)(p.IDLE_LINK_STATUS),x=(0,i.useRef)(null),{href:v,as:S,children:E,prefetch:w=null,passHref:I,replace:j,shallow:L,scroll:P,onClick:R,onMouseEnter:N,onTouchStart:O,legacyBehavior:_=!1,onNavigate:A,ref:C,unstable_dynamicOnHover:M,...T}=t;n=E,_&&("string"==typeof n||"number"==typeof n)&&(n=(0,l.jsx)("a",{children:n}));let D=i.default.useContext(u.AppRouterContext),k=!1!==w,B=!1!==w?null===(r=w)||"auto"===r?g.FetchStrategy.PPR:g.FetchStrategy.Full:g.FetchStrategy.PPR,{href:U,as:$}=i.default.useMemo(()=>{let e=m(v);return{href:e,as:S?m(S):e}},[v,S]);if(_){if(n?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});o=i.default.Children.only(n)}let z=_?o&&"object"==typeof o&&o.ref:C,V=i.default.useCallback(e=>(null!==D&&(x.current=(0,p.mountLinkInstance)(e,U,D,B,k,y)),()=>{x.current&&((0,p.unmountLinkForCurrentNavigation)(x.current),x.current=null),(0,p.unmountPrefetchableInstance)(e)}),[k,U,D,B,y]),Z={ref:(0,c.useMergedRef)(V,z),onClick(t){_||"function"!=typeof R||R(t),_&&o.props&&"function"==typeof o.props.onClick&&o.props.onClick(t),!D||t.defaultPrevented||function(t,r,n,o,a,l,s){if("undefined"!=typeof window){let u,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((u=t.currentTarget.getAttribute("target"))&&"_self"!==u||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,h.isLocalURL)(r)){a&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),s){let e=!1;if(s({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(99781);i.default.startTransition(()=>{d(n||r,a?"replace":"push",l??!0,o.current)})}}(t,U,$,x,j,P,A)},onMouseEnter(e){_||"function"!=typeof N||N(e),_&&o.props&&"function"==typeof o.props.onMouseEnter&&o.props.onMouseEnter(e),D&&k&&(0,p.onNavigationIntent)(e.currentTarget,!0===M)},onTouchStart:function(e){_||"function"!=typeof O||O(e),_&&o.props&&"function"==typeof o.props.onTouchStart&&o.props.onTouchStart(e),D&&k&&(0,p.onNavigationIntent)(e.currentTarget,!0===M)}};return(0,d.isAbsoluteUrl)($)?Z.href=$:_&&!I&&("a"!==o.type||"href"in o.props)||(Z.href=(0,f.addBasePath)($)),a=_?i.default.cloneElement(o,Z):(0,l.jsx)("a",{...T,...Z,children:n}),(0,l.jsx)(b.Provider,{value:s,children:a})}e.r(84508);let b=(0,i.createContext)(p.IDLE_LINK_STATUS),x=()=>(0,i.useContext)(b);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)}]);