(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18333,e=>{"use strict";var t=e.i(71645);function r(e,s=5e3){(0,t.useEffect)(()=>{let t=setInterval(()=>{e()},s);return()=>clearInterval(t)},[e,s])}e.s(["useRealtimeUpdates",()=>r])},31886,e=>{"use strict";var t=e.i(43476),r=e.i(73297),s=e.i(71645);function a({imageUrl:e,lots:a,onLotClick:o,isEditMode:l=!1,onAreaDrawn:n,selectedLotId:i,selectedLotIds:d=[],drawingMode:c="polygon",previewArea:m=null}){let{canvasRef:u,imageRef:h,containerRef:x,hoveredLot:g,drawingPoints:p,scale:b,handleCanvasClick:f,handleCanvasMouseMove:v,handleMouseDown:y,handleMouseUp:j,handleContextMenu:w,handleTouchStart:N,handleTouchMove:L,handleTouchEnd:k,handleZoomIn:S,handleZoomOut:C,handleResetZoom:E,handleFinishDrawing:P,handleCancelDrawing:M}=function({imageUrl:e,lots:t,onLotClick:a,isEditMode:o=!1,onAreaDrawn:l,selectedLotId:n,selectedLotIds:i=[],drawingMode:d="polygon",previewArea:c=null}){let m=(0,s.useRef)(null),u=(0,s.useRef)(null),h=(0,s.useRef)(null),[x,g]=(0,s.useState)([]),[p,b]=(0,s.useState)(null),[f,v]=(0,s.useState)(!1),[y,j]=(0,s.useState)(1),[w,N]=(0,s.useState)({x:0,y:0}),[L,k]=(0,s.useState)(!1),[S,C]=(0,s.useState)({x:0,y:0}),[E,P]=(0,s.useState)(null),[M,A]=(0,s.useState)(1),[R,D]=(0,s.useState)({x:0,y:0}),[$,B]=(0,s.useState)(null),[I,V]=(0,s.useState)(!1),[F,W]=(0,s.useState)(null),[O,T]=(0,s.useState)(null),z=(0,s.useCallback)(()=>{let e=m.current,s=u.current;if(!e||!s||!f)return;let a=e.getContext("2d");if(a){if(a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",a.clearRect(0,0,e.width,e.height),a.save(),a.translate(w.x,w.y),a.scale(y,y),a.drawImage(s,0,0),t.forEach(e=>{let t=e.id===n||i.includes(e.id);((e,t,s,a)=>{if(t.area.points.length<3)return;e.beginPath(),e.moveTo(t.area.points[0].x,t.area.points[0].y),t.area.points.forEach(t=>{e.lineTo(t.x,t.y)}),e.closePath();let o="rgba(34, 197, 94, 0.3)",l="#22c55e";t.status===r.LotStatus.RESERVED?(o="rgba(251, 191, 36, 0.3)",l="#fbbf24"):t.status===r.LotStatus.SOLD?(o="rgba(239, 68, 68, 0.3)",l="#ef4444"):t.status===r.LotStatus.BLOCKED&&(o="rgba(107, 114, 128, 0.3)",l="#6b7280"),s&&(o=o.replace("0.3","0.5"),l="#000"),a&&(o="rgba(59, 130, 246, 0.5)",l="#3b82f6"),e.fillStyle=o,e.fill(),e.strokeStyle=l,e.lineWidth=s||a?3:2,e.stroke()})(a,e,e.id===p?.id,t)}),o&&"polygon"===d&&x.length>0&&(a.beginPath(),a.moveTo(x[0].x,x[0].y),x.forEach(e=>{a.lineTo(e.x,e.y)}),a.strokeStyle="#3b82f6",a.lineWidth=2/y,a.stroke(),x.forEach(e=>{a.beginPath(),a.arc(e.x,e.y,5/y,0,2*Math.PI),a.fillStyle="#3b82f6",a.fill()})),o&&"rectangle"===d&&I&&F&&O){let e=O.x-F.x,t=O.y-F.y;a.strokeStyle="#3b82f6",a.fillStyle="rgba(59, 130, 246, 0.2)",a.lineWidth=2/y,a.strokeRect(F.x,F.y,e,t),a.fillRect(F.x,F.y,e,t)}o&&c&&c.points.length>=3&&(a.beginPath(),a.moveTo(c.points[0].x,c.points[0].y),c.points.forEach(e=>{a.lineTo(e.x,e.y)}),a.closePath(),a.fillStyle="rgba(34, 197, 94, 0.3)",a.fill(),a.strokeStyle="#22c55e",a.lineWidth=3/y,a.stroke(),c.points.forEach(e=>{a.beginPath(),a.arc(e.x,e.y,6/y,0,2*Math.PI),a.fillStyle="#22c55e",a.fill(),a.strokeStyle="#fff",a.lineWidth=2/y,a.stroke()})),a.restore()}},[f,t,x,p,n,i,o,y,w,d,I,F,O,c]);(0,s.useEffect)(()=>{let t=m.current,r=u.current;if(!t||!r||!e||""===e.trim())return;let s=()=>{t.width=r.naturalWidth,t.height=r.naturalHeight,v(!0)},a=()=>{console.error("Erro ao carregar imagem do mapa")};return r.addEventListener("load",s),r.addEventListener("error",a),r.src=e,()=>{r.removeEventListener("load",s),r.removeEventListener("error",a)}},[e]),(0,s.useEffect)(()=>{z()},[z]);let q=(e,t,r)=>{let s=!1;for(let a=0,o=r.length-1;a<r.length;o=a++){let l=r[a].x,n=r[a].y,i=r[o].x,d=r[o].y;n>t!=d>t&&e<(i-l)*(t-n)/(d-n)+l&&(s=!s)}return s},U=e=>{let t=m.current;if(!t)return{x:0,y:0};let r=t.getBoundingClientRect(),s=e.clientX-r.left,a=e.clientY-r.top,o=t.width/r.width,l=t.height/r.height;return{x:(s*o-w.x)/y,y:(a*l-w.y)/y}},Y=(0,s.useCallback)(e=>{e.preventDefault();let t=m.current;if(!t)return;let r=t.getBoundingClientRect(),s=e.clientX-r.left,a=e.clientY-r.top,o=t.width/r.width,l=t.height/r.height,n=s*o,i=a*l,d=(n-w.x)/y,c=(i-w.y)/y,u=Math.max(.5,Math.min(y+(e.deltaY>0?-.1:.1),5));j(u),N({x:n-d*u,y:i-c*u})},[y,w]),K=(e,t)=>{let r=e.clientX-t.clientX,s=e.clientY-t.clientY;return Math.sqrt(r*r+s*s)},X=(e,t)=>({x:(e.clientX+t.clientX)/2,y:(e.clientY+t.clientY)/2});return(0,s.useEffect)(()=>{let e=m.current;if(e)return e.addEventListener("wheel",Y,{passive:!1}),()=>{e.removeEventListener("wheel",Y)}},[Y]),{canvasRef:m,imageRef:u,containerRef:h,hoveredLot:p,drawingPoints:x,scale:y,handleCanvasClick:e=>{if(L||I)return;let{x:r,y:s}=U(e);if(o&&"polygon"===d)g([...x,{x:r,y:s}]);else if(!o){let e=t.find(e=>q(r,s,e.area.points));e&&a&&a(e)}},handleCanvasMouseMove:e=>{let r=m.current;if(!r)return;if(L){let t=r.getBoundingClientRect(),s=r.width/t.width,a=r.height/t.height,o=(e.clientX-S.x)*s,l=(e.clientY-S.y)*a;N(e=>({x:e.x+o,y:e.y+l})),C({x:e.clientX,y:e.clientY});return}if(I&&F){let{x:t,y:r}=U(e);T({x:t,y:r});return}if(o)return;let{x:s,y:a}=U(e),l=t.find(e=>q(s,a,e.area.points));b(l||null),l?r.style.cursor="pointer":r.style.cursor="default"},handleMouseDown:e=>{if(2===e.button)e.preventDefault(),k(!0),C({x:e.clientX,y:e.clientY}),m.current&&(m.current.style.cursor="grabbing");else if(0===e.button&&o&&"rectangle"===d){let{x:t,y:r}=U(e);V(!0),W({x:t,y:r}),T({x:t,y:r})}},handleMouseUp:e=>{if(k(!1),m.current&&(m.current.style.cursor="default"),I&&F&&l){let t=U(e),r=Math.min(F.x,t.x),s=Math.max(F.x,t.x),a=Math.min(F.y,t.y),o=Math.max(F.y,t.y),n=o-a;if(s-r>10&&n>10){let e=[{x:r,y:a},{x:s,y:a},{x:s,y:o},{x:r,y:o}];console.log("ðŸ“ RetÃ¢ngulo criado:",{start:F,end:t,points:e}),l({points:e})}V(!1),W(null),T(null)}},handleContextMenu:e=>{e.preventDefault()},handleTouchStart:e=>{if(2===e.touches.length){let t=K(e.touches[0],e.touches[1]),r=X(e.touches[0],e.touches[1]),s=m.current;if(!s)return;let a=s.getBoundingClientRect(),o=r.x-a.left,l=r.y-a.top;P(t),A(y),D({x:w.x,y:w.y}),B({x:o,y:l})}else 1!==e.touches.length||o||(k(!0),C({x:e.touches[0].clientX-w.x,y:e.touches[0].clientY-w.y}))},handleTouchMove:e=>{if(2===e.touches.length&&null!==E&&$){e.preventDefault();let t=m.current;if(!t)return;let r=t.getBoundingClientRect(),s=X(e.touches[0],e.touches[1]),a=s.x-r.left,o=s.y-r.top,l=Math.max(.5,Math.min(K(e.touches[0],e.touches[1])/E*M,5)),n=t.width/r.width,i=t.height/r.height,d=$.x*n,c=$.y*i,u=(d-R.x)/M,h=(c-R.y)/M;j(l),N({x:a*n-u*l,y:o*i-h*l})}else 1===e.touches.length&&L&&!o&&(e.preventDefault(),N({x:e.touches[0].clientX-S.x,y:e.touches[0].clientY-S.y}))},handleTouchEnd:()=>{P(null),B(null),k(!1)},handleZoomIn:()=>{j(e=>Math.min(e+.2,5))},handleZoomOut:()=>{j(e=>Math.max(e-.2,.5))},handleResetZoom:()=>{j(1),N({x:0,y:0})},handleFinishDrawing:()=>{"polygon"===d&&x.length>=3&&l&&(l({points:x}),g([]))},handleCancelDrawing:()=>{g([]),V(!1),W(null),T(null)}}}({imageUrl:e,lots:a,onLotClick:o,isEditMode:l,onAreaDrawn:n,selectedLotId:i,selectedLotIds:d,drawingMode:c,previewArea:m});return(0,t.jsxs)("div",{ref:x,className:"relative",children:[e&&""!==e.trim()?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{ref:h,src:e,alt:"Map",className:"hidden"}),(0,t.jsx)("canvas",{ref:u,onClick:f,onMouseMove:v,onMouseDown:y,onMouseUp:j,onMouseLeave:j,onContextMenu:w,onTouchStart:N,onTouchMove:L,onTouchEnd:k,className:"border border-gray-300 rounded-lg shadow-lg cursor-crosshair max-w-full"})]}):(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center bg-gray-50",children:[(0,t.jsx)("svg",{className:"w-24 h-24 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("p",{className:"text-gray-600 font-medium mb-2",children:"Nenhuma imagem do mapa carregada"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Adicione uma imagem ao mapa para comeÃ§ar a desenhar os lotes"})]}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[(0,t.jsx)("button",{onClick:S,className:"bg-white hover:bg-gray-50 text-gray-800 font-bold py-2 px-3 rounded-lg shadow-lg border border-gray-200 transition-all hover:shadow-xl cursor-pointer",title:"Zoom In",children:"+"}),(0,t.jsx)("button",{onClick:C,className:"bg-white hover:bg-gray-50 text-gray-800 font-bold py-2 px-3 rounded-lg shadow-lg border border-gray-200 transition-all hover:shadow-xl cursor-pointer",title:"Zoom Out",children:"-"}),(0,t.jsx)("button",{onClick:E,className:"bg-white hover:bg-gray-50 text-gray-800 font-medium py-2 px-3 rounded-lg shadow-lg border border-gray-200 transition-all hover:shadow-xl text-xs cursor-pointer",title:"Reset Zoom",children:"Reset"}),(0,t.jsxs)("div",{className:"bg-white px-3 py-1 rounded-lg shadow-lg border border-gray-200 text-xs text-gray-700 text-center",children:[Math.round(100*b),"%"]})]}),l&&"polygon"===c&&p.length>0&&(0,t.jsxs)("div",{className:"absolute bottom-4 left-4 flex gap-2",children:[(0,t.jsxs)("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 shadow-lg transition-all hover:shadow-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:shadow-none cursor-pointer",disabled:p.length<3,children:["Finalizar Ãrea (",p.length," pontos)"]}),(0,t.jsx)("button",{onClick:M,className:"px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 shadow-lg transition-all hover:shadow-xl cursor-pointer",children:"Cancelar"})]}),l&&"rectangle"===c&&!m&&(0,t.jsx)("div",{className:"absolute bottom-4 left-4 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg",children:(0,t.jsx)("p",{className:"font-medium",children:"ðŸ”² Modo RetÃ¢ngulo: Clique e arraste para desenhar"})}),l&&m&&m.points.length>=3&&(0,t.jsx)("div",{className:"absolute bottom-4 left-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg",children:(0,t.jsx)("p",{className:"font-medium",children:"âœ… Ãrea selecionada - Complete as informaÃ§Ãµes do lote"})}),g&&!l&&(0,t.jsxs)("div",{className:"absolute top-4 left-4 bg-white p-4 rounded-lg shadow-xl border border-gray-200",children:[(0,t.jsxs)("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:["Lote ",g.lotNumber]}),(0,t.jsxs)("p",{className:"text-sm text-gray-700 mb-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Status:"})," ",(0,t.jsx)("span",{className:g.status===r.LotStatus.AVAILABLE?"font-semibold text-green-700":g.status===r.LotStatus.RESERVED?"font-semibold text-amber-700":g.status===r.LotStatus.BLOCKED?"font-semibold text-gray-500":"font-semibold text-red-700",children:g.status===r.LotStatus.AVAILABLE?"DisponÃ­vel":g.status===r.LotStatus.RESERVED?"Reservado":g.status===r.LotStatus.BLOCKED?"Bloqueado":"Vendido"})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-700 mb-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Ãrea:"})," ",g.size,"mÂ²"]}),(0,t.jsxs)("p",{className:"text-base font-bold text-gray-900 mt-2",children:["R$ ",g.price.toLocaleString("pt-BR")]}),g.pricePerM2&&(0,t.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["R$ ",g.pricePerM2.toLocaleString("pt-BR"),"/mÂ²"]})]})]})}e.s(["default",()=>a],31886)},47610,e=>{"use strict";var t=e.i(43476),r=e.i(31886),s=e.i(71645);e.i(47167);var a=e.i(81949);let o="https://n8n.fehshop.com/webhook",l=[{label:"Pix",value:"pix",icon:(0,t.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"5",stroke:"currentColor",strokeWidth:2}),(0,t.jsx)("path",{d:"M8 12h8",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]})},{label:"CartÃ£o",value:"cartao",icon:(0,t.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("rect",{x:"2",y:"6",width:"20",height:"12",rx:"3",stroke:"currentColor",strokeWidth:2}),(0,t.jsx)("path",{d:"M2 10h20",stroke:"currentColor",strokeWidth:2})]})},{label:"Dinheiro",value:"dinheiro",icon:(0,t.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("rect",{x:"3",y:"7",width:"18",height:"10",rx:"2",stroke:"currentColor",strokeWidth:2}),(0,t.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:2})]})},{label:"Outro",value:"outro",icon:(0,t.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:2}),(0,t.jsx)("path",{d:"M8 12h8",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]})}];function n({lots:e,onClose:r,onSuccess:n}){let{formData:i,setFormData:d,isSubmitting:c,error:m,handleSubmit:u}=function(e,t){let r=()=>{let e=localStorage.getItem("currentUser"),t=localStorage.getItem("userData");if(e)try{return JSON.parse(e)}catch(e){console.error("[usePurchaseForm] Erro ao parsear currentUser:",e)}if(t)try{return JSON.parse(t)}catch(e){console.error("[usePurchaseForm] Erro ao parsear userData:",e)}return null},l=r(),[n,i]=(0,s.useState)({customerName:"",customerEmail:"",customerPhone:"",customerCPF:"",message:"",sellerName:l?.name||"",sellerEmail:l?.email||"",sellerPhone:l?.phone||"",sellerCPF:l?.cpf||"",paymentMethod:"",otherPayment:""});(0,s.useEffect)(()=>{let e=r();e&&(console.log("[usePurchaseForm] âœ… Dados do vendedor carregados automaticamente:",{name:e.name,email:e.email,cpf:e.cpf}),Promise.resolve().then(()=>{i(t=>({...t,sellerName:e.name||t.sellerName,sellerEmail:e.email||t.sellerEmail,sellerPhone:e.phone||t.sellerPhone,sellerCPF:e.cpf||t.sellerCPF}))}))},[]);let[d,c]=(0,s.useState)(!1),[m,u]=(0,s.useState)(null),h=e=>{let t=e.replace(/\D/g,"");if("99999999998"===t)return!0;if(11!==t.length||/^(\d)\1{10}$/.test(t))return!1;let r=0;for(let e=0;e<9;e++)r+=parseInt(t.charAt(e))*(10-e);let s=11-r%11;if(s>=10&&(s=0),s!==parseInt(t.charAt(9)))return!1;r=0;for(let e=0;e<10;e++)r+=parseInt(t.charAt(e))*(11-e);return(s=11-r%11)>=10&&(s=0),s===parseInt(t.charAt(10))},x=async s=>{if(s.preventDefault(),c(!0),u(null),!n.customerCPF||!h(n.customerCPF)){u("CPF do cliente Ã© obrigatÃ³rio e deve ser vÃ¡lido."),c(!1);return}if(!n.sellerCPF||!h(n.sellerCPF)){u("CPF do vendedor Ã© obrigatÃ³rio e deve ser vÃ¡lido."),c(!1);return}try{console.log(`[usePurchaseForm] ðŸ” Verificando disponibilidade de ${e.length} lote(s)...`);let s=[];for(let t of e){let e=await a.default.get(`${o}/mapas/lotes/valido?idLote=${t.id}`);0===e.data.isAvailable&&s.push(t.lotNumber)}if(s.length>0){u(`Os seguintes lotes n\xe3o est\xe3o mais dispon\xedveis: ${s.join(", ")}. Por favor, remova-os da sele\xe7\xe3o.`),c(!1),console.log(`[usePurchaseForm] âŒ Lotes indispon\xedveis:`,s);return}console.log(`[usePurchaseForm] âœ… Todos os ${e.length} lote(s) est\xe3o dispon\xedveis, prosseguindo com a reserva...`);let l=r(),i={lots:e.map(e=>({id:e.id,mapId:e.mapId,lotNumber:e.lotNumber,area:e.area,status:"reserved",price:e.price,size:e.size,description:e.description,features:e.features,createdAt:e.createdAt,updatedAt:e.updatedAt})),customer:{name:n.customerName,email:n.customerEmail,phone:n.customerPhone,cpf:n.customerCPF,message:n.message||null},seller:{id:l.id,name:n.sellerName,email:n.sellerEmail,phone:n.sellerPhone,cpf:n.sellerCPF},purchaseRequest:{paymentMethod:n.otherPayment||n.paymentMethod,lotIds:e.map(e=>e.id),status:"pending",createdAt:new Date().toISOString()}};console.log(`[usePurchaseForm] ðŸ“¤ Enviando reserva \xfanica com ${e.length} lote(s) e ID do vendedor:`,l?.id),await a.default.post(`${o}/mapas/lotes/reservar`,i,{headers:{"Content-Type":"application/json"},timeout:1e4}),console.log(`[usePurchaseForm] âœ… Reserva enviada com sucesso para ${e.length} lote(s)`),t()}catch(e){console.error("[usePurchaseForm] âŒ Erro ao enviar reserva:",e),a.default.isAxiosError(e)?e.response?409===e.response.status||e.response.data?.message?.includes("disponÃ­vel")?u("Este lote nÃ£o estÃ¡ mais disponÃ­vel. Por favor, escolha outro lote."):u(`Erro do servidor: ${e.response.data?.message||e.response.statusText}`):e.request?u("NÃ£o foi possÃ­vel conectar ao servidor. Verifique sua conexÃ£o."):u("Erro ao preparar requisiÃ§Ã£o."):u("Erro inesperado ao enviar reserva."),c(!1)}};return{formData:n,setFormData:i,isSubmitting:d,error:m,handleSubmit:x}}(e,n),[h,x]=s.default.useState(""),g=e.reduce((e,t)=>e+t.price,0),p=e.reduce((e,t)=>e+t.size,0);return(0,t.jsx)("div",{className:"fixed inset-0 bg-[var(--foreground)]/40 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:(0,t.jsxs)("div",{className:"bg-[var(--card-bg)] rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-[var(--shadow-xl)] border border-[var(--border)]",children:[(0,t.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-[var(--primary)] to-[var(--primary-light)] text-white p-6 rounded-t-2xl shadow-[var(--shadow-md)] z-10",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-white/15 backdrop-blur-sm rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Manifestar Interesse"}),(0,t.jsx)("p",{className:"text-white/90 text-sm",children:1===e.length?`Lote ${e[0].lotNumber}`:`${e.length} Lotes Selecionados`})]})]}),(0,t.jsx)("button",{onClick:r,className:"w-9 h-9 flex items-center justify-center rounded-lg bg-white/10 hover:bg-white/20 transition-colors cursor-pointer",type:"button",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-[var(--primary)]/5 to-[var(--primary-light)]/10 border border-[var(--primary)]/15 rounded-2xl p-5 mb-6",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-[var(--foreground)] mb-3",children:1===e.length?"Lote Selecionado":"Lotes Selecionados"}),(0,t.jsx)("div",{className:"space-y-2 mb-4 max-h-40 overflow-y-auto",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-white/80 rounded-lg p-2 border border-[var(--border)] flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-[var(--surface)]",children:["Lote ",e.lotNumber]}),(0,t.jsxs)("span",{className:"text-sm text-[var(--surface)]",children:[e.size,"mÂ² - R$ ",e.price.toLocaleString("pt-BR")]})]},e.id))}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white/80 rounded-xl p-3 border border-[var(--border)]",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-[var(--surface)] mb-1",children:"Ãrea Total"}),(0,t.jsxs)("p",{className:"text-lg font-bold text-[var(--surface)]",children:[p,"mÂ²"]})]}),(0,t.jsxs)("div",{className:"bg-white/80 rounded-xl p-3 border border-[var(--border)]",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-[var(--surface)] mb-1",children:"PreÃ§o Total"}),(0,t.jsxs)("p",{className:"text-lg font-bold text-[var(--surface)]",children:["R$ ",g.toLocaleString("pt-BR")]})]})]})]}),m&&(0,t.jsxs)("div",{className:"bg-[var(--danger)]/10 border border-[var(--danger)]/30 rounded-xl p-4 mb-4 flex items-start gap-3",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-[var(--danger)] flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("p",{className:"text-[var(--danger)] text-sm font-medium",children:m})]}),(0,t.jsxs)("form",{onSubmit:u,className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-[var(--foreground)] mb-2",children:"Nome Completo *"}),(0,t.jsx)("input",{type:"text",required:!0,value:i.customerName,onChange:e=>d({...i,customerName:e.target.value}),className:"w-full px-4 py-2.5 border border-[var(--border)] rounded-xl text-[var(--foreground)] bg-white focus:ring-2 focus:ring-[var(--primary)]/30 focus:border-[var(--primary)] transition-all",placeholder:"Seu nome completo"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-[var(--foreground)] mb-2",children:"Email *"}),(0,t.jsx)("input",{type:"email",required:!0,value:i.customerEmail,onChange:e=>d({...i,customerEmail:e.target.value}),className:"w-full px-4 py-2.5 border border-[var(--border)] rounded-xl text-[var(--foreground)] bg-white focus:ring-2 focus:ring-[var(--primary)]/30 focus:border-[var(--primary)] transition-all",placeholder:"seu@email.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-[var(--foreground)] mb-2",children:"Telefone *"}),(0,t.jsx)("input",{type:"tel",required:!0,value:i.customerPhone,onChange:e=>{let t=e.target.value.replace(/\D/g,""),r=t;r=t.length<=2?t:t.length<=6?`(${t.slice(0,2)}) ${t.slice(2)}`:t.length<=10?`(${t.slice(0,2)}) ${t.slice(2,6)}-${t.slice(6)}`:`(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7,11)}`,d({...i,customerPhone:r})},className:"w-full px-4 py-2.5 border border-[var(--border)] rounded-xl text-[var(--foreground)] bg-white focus:ring-2 focus:ring-[var(--primary)]/30 focus:border-[var(--primary)] transition-all",placeholder:"(00) 00000-0000",maxLength:15})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-[var(--foreground)] mb-2",children:"CPF *"}),(0,t.jsx)("input",{type:"text",required:!0,value:i.customerCPF,onChange:e=>{let t,r=(t=e.target.value.replace(/\D/g,"")).length<=3?t:t.length<=6?`${t.slice(0,3)}.${t.slice(3)}`:t.length<=9?`${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6)}`:`${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6,9)}-${t.slice(9,11)}`;d({...i,customerCPF:r}),14===r.length?(e=>{let t=e.replace(/\D/g,"");if("99999999998"===t)return!0;if(11!==t.length||/^(\d)\1{10}$/.test(t))return!1;let r=0;for(let e=0;e<9;e++)r+=parseInt(t.charAt(e))*(10-e);let s=11-r%11;if(s>=10&&(s=0),s!==parseInt(t.charAt(9)))return!1;r=0;for(let e=0;e<10;e++)r+=parseInt(t.charAt(e))*(11-e);return(s=11-r%11)>=10&&(s=0),s===parseInt(t.charAt(10))})(r)?x(""):x("CPF invÃ¡lido"):x("")},className:`w-full px-4 py-2.5 border rounded-xl text-[var(--foreground)] bg-white focus:ring-2 focus:ring-[var(--primary)]/30 transition-all ${h?"border-red-500 focus:border-red-500":"border-[var(--border)] focus:border-[var(--primary)]"}`,placeholder:"000.000.000-00",maxLength:14}),h&&(0,t.jsxs)("p",{className:"text-red-600 text-sm mt-1",children:["âŒ ",h]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-[var(--foreground)] mb-2",children:"Mensagem"}),(0,t.jsx)("textarea",{value:i.message,onChange:e=>d({...i,message:e.target.value}),className:"w-full px-4 py-2.5 border border-[var(--border)] rounded-xl text-[var(--foreground)] bg-white focus:ring-2 focus:ring-[var(--primary)]/30 focus:border-[var(--primary)] transition-all",rows:4,placeholder:"Deixe uma mensagem ou dÃºvida"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-[var(--foreground)] mb-2",children:"Forma de Pagamento *"}),(0,t.jsx)("div",{className:"flex gap-3",children:l.map(e=>(0,t.jsxs)("button",{type:"button",className:`flex items-center gap-2 px-4 py-2 rounded-xl border transition-colors font-medium
                      ${i.paymentMethod===e.value?"bg-[var(--primary)] text-white border-[var(--primary)]":"bg-white text-[var(--surface)] border-[var(--border)] hover:text-white hover:bg-[var(--primary)]/10"}
                    `,onClick:()=>{var t;"outro"!==(t=e.value)?d({...i,paymentMethod:t,otherPayment:""}):d({...i,paymentMethod:t})},children:[e.icon,e.label]},e.value))}),(0,t.jsx)("input",{type:"hidden",name:"paymentMethod",value:i.paymentMethod||"",required:!0}),!i.paymentMethod&&(0,t.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"âŒ Selecione uma forma de pagamento"}),"outro"===i.paymentMethod&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-[var(--foreground)] mb-2",children:"Especifique a forma de pagamento *"}),(0,t.jsx)("input",{maxLength:30,type:"text",required:!0,value:i.otherPayment||"",onChange:e=>d({...i,otherPayment:e.target.value}),className:"w-full px-4 py-2.5 border border-[var(--border)] rounded-xl text-[var(--foreground)] bg-white focus:ring-2 focus:ring-[var(--primary)]/30 focus:border-[var(--primary)] transition-all",placeholder:"Descreva a forma de pagamento"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"submit",disabled:c||""!==h,className:"flex-1 px-5 py-3 bg-[var(--success)] text-white rounded-xl hover:bg-[var(--success)]/90 font-semibold shadow-[var(--shadow-md)] transition-all hover:shadow-[var(--shadow-lg)] disabled:bg-[var(--foreground)]/20 disabled:cursor-not-allowed disabled:hover:shadow-[var(--shadow-md)] cursor-pointer",children:c?(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Enviar Interesse"}),(0,t.jsx)("button",{type:"button",onClick:r,disabled:c,className:"flex-1 px-5 py-3 bg-[var(--surface)] text-[var(--foreground)] border border-[var(--border)] rounded-xl hover:bg-[var(--foreground)]/5 font-semibold shadow-[var(--shadow-sm)] transition-all hover:shadow-[var(--shadow-md)] disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:"Cancelar"})]})]})]})]})})}var i=e.i(73297),d=e.i(18333);let c="https://n8n.fehshop.com/webhook";function m(){let{maps:e,lots:o,selectedMap:l,selectedLots:m,viewingLot:u,showPurchaseModal:h,isLoading:x,availableLotsCount:g,reservedLotsCount:p,soldLotsCount:b,handleLotClick:f,handleToggleLotSelection:v,handleOpenPurchaseModal:y,handleClearSelection:j,handlePurchaseSuccess:w,handlePurchaseClose:N,handleViewClose:L,selectMap:k,isLotSelected:S}=(()=>{let[e,t]=(0,s.useState)([]),[r,o]=(0,s.useState)([]),[l,n]=(0,s.useState)(null),m=(0,s.useRef)(null),[u,h]=(0,s.useState)([]),[x,g]=(0,s.useState)(null),[p,b]=(0,s.useState)(!1),[f,v]=(0,s.useState)(!0),[y,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(0);(0,d.useRealtimeUpdates)(()=>{console.log("ðŸ”„ Auto-refresh da pÃ¡gina pÃºblica: recarregando mapas e lotes..."),N(e=>e+1)},1e4),(0,s.useEffect)(()=>{(async()=>{try{console.log("ðŸ“ [PÃ¡gina PÃºblica] Buscando mapas da API... (refreshKey:",w,")");let e=(await a.default.get(`${c}/mapas`)).data;if(console.log("âœ… [PÃ¡gina PÃºblica] Resposta da API /mapas:",e),!Array.isArray(e)){console.warn("âš ï¸ [PÃ¡gina PÃºblica] API nÃ£o retornou array de mapas:",e),t([]),o([]),n(null);return}if(e.length>0){let r=e.filter(e=>e&&e.mapId).map(e=>({id:e.mapId,name:e.name||`Mapa ${e.mapId}`,imageUrl:e.imageUrl||"",imageType:e.imageType||"image/png",width:e.width||800,height:e.height||600,createdAt:new Date,updatedAt:new Date}));console.log(`âœ… [P\xe1gina P\xfablica] ${r.length} mapas carregados`),t(r);let s=m.current;if(s&&r.some(e=>e.id===s))console.log(`ðŸ“Œ [P\xe1gina P\xfablica] Mantendo mapa selecionado: ${s}`),await L(s);else if(r.length>0){let e=r[0];console.log(`ðŸŽ¯ [P\xe1gina P\xfablica] Selecionando primeiro mapa: ${e.id} - ${e.name}`),n(e),m.current=e.id,await L(e.id)}}else console.log("ðŸ“­ [PÃ¡gina PÃºblica] Nenhum mapa retornado pela API"),t([]),o([]),n(null),m.current=null}catch(e){console.error("Erro ao buscar mapas:",e),t([]),o([]),n(null)}finally{v(!1)}})()},[w]);let L=async e=>{j(!0);try{console.log(`ðŸ“¦ [P\xe1gina P\xfablica] Buscando lotes do mapa ${e}...`);let t=await a.default.get(`${c}/mapas/lotes`,{params:{mapId:e},timeout:1e4});if(console.log("ðŸ“¦ [PÃ¡gina PÃºblica] Resposta da API /mapas/lotes:",t.data),!t.data){console.warn("âš ï¸ [PÃ¡gina PÃºblica] API retornou resposta vazia para /mapas/lotes"),o([]),j(!1);return}let r=Array.isArray(t.data)?t.data[0]:t.data;if(r&&Array.isArray(r.lots)){let t=r.lots.map(t=>({...t,mapId:r.mapId||e,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)}));console.log(`âœ… [P\xe1gina P\xfablica] ${t.length} lotes carregados para o mapa ${e}`),o(t)}else console.log("ðŸ“­ [PÃ¡gina PÃºblica] Nenhum lote encontrado para o mapa",e),o([])}catch(e){console.error("âŒ [PÃ¡gina PÃºblica] Erro ao carregar lotes do mapa:",e),o([])}finally{j(!1)}},k=(0,s.useCallback)(e=>{g(e)},[]),S=(0,s.useCallback)(e=>{e.status===i.LotStatus.AVAILABLE&&h(t=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])},[]),C=(0,s.useCallback)(()=>{u.length>0?b(!0):alert("Selecione pelo menos um lote disponÃ­vel antes de enviar a reserva.")},[u]),E=(0,s.useCallback)(()=>{b(!1),N(e=>e+1),alert(`${1===u.length?"Seu interesse foi registrado":"Seus interesses foram registrados"} com sucesso! ${1===u.length?"O lote foi reservado":"Os lotes foram reservados"}. Entraremos em contato em breve.`),h([])},[u.length]),P=(0,s.useCallback)(()=>{b(!1)},[]),M=(0,s.useCallback)(()=>{h([])},[]),A=(0,s.useCallback)(()=>{g(null)},[]),R=r.filter(e=>e.status===i.LotStatus.AVAILABLE).length,D=r.filter(e=>e.status===i.LotStatus.RESERVED).length,$=r.filter(e=>e.status===i.LotStatus.SOLD).length,B=(0,s.useCallback)(async t=>{console.log(`Selecionando mapa ${t}...`);let r=e.find(e=>e.id===t);n(r||null),m.current=r?t:null,r?await L(t):o([])},[e]);return{maps:e,lots:r,selectedMap:l,selectedLots:u,viewingLot:x,showPurchaseModal:p,isLoading:f,isLoadingLots:y,availableLotsCount:R,reservedLotsCount:D,soldLotsCount:$,handleLotClick:k,handleToggleLotSelection:S,handleOpenPurchaseModal:C,handleClearSelection:M,handlePurchaseSuccess:E,handlePurchaseClose:P,handleViewClose:A,selectMap:B,isLotSelected:e=>u.some(t=>t.id===e)}})();return x?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-[var(--primary)] rounded-full mb-4 animate-pulse shadow-[var(--shadow-lg)]",children:(0,t.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,t.jsx)("p",{className:"text-white text-lg font-semibold",children:"Carregando mapas..."})]})})}):(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Mapas e Lotes"}),(0,t.jsx)("p",{className:"text-white/70",children:"Visualize e gerencie os lotes disponÃ­veis para compra"})]}),e.length>1&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-white mb-2",children:"Selecione um Mapa"}),(0,t.jsx)("select",{value:l?.id||"",onChange:e=>k(e.target.value),className:"w-full sm:w-auto px-5 py-3 bg-white border-none rounded-xl text-[#1c1c1c] font-semibold shadow-[var(--shadow-md)] focus:ring-4 focus:ring-[var(--accent)]/30 transition-all cursor-pointer",children:e.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))})]}),l&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 relative",children:[(0,t.jsx)("div",{className:"lg:col-span-3",children:(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-[var(--shadow-lg)] p-4 sm:p-6",children:(0,t.jsx)(r.default,{imageUrl:l.imageUrl,lots:o,onLotClick:f,selectedLotIds:m.map(e=>e.id)})})}),(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{className:"bg-[var(--card-bg)] rounded-2xl shadow-[var(--shadow-lg)] p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"EstatÃ­sticas"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-[var(--surface)] rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-[var(--success)] rounded-full shadow-md"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-white",children:"DisponÃ­vel"})]}),(0,t.jsx)("span",{className:"font-bold text-white text-xl",children:g})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-[var(--surface)] rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-[var(--warning)] rounded-full shadow-md"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-white",children:"Reservado"})]}),(0,t.jsx)("span",{className:"font-bold text-white text-xl",children:p})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-[var(--surface)] rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-[var(--danger)] rounded-full shadow-md"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-white",children:"Vendido"})]}),(0,t.jsx)("span",{className:"font-bold text-white text-xl",children:b})]})]})]}),(0,t.jsxs)("div",{className:"bg-[var(--card-bg)] rounded-2xl shadow-[var(--shadow-lg)] p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Legenda"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-[var(--surface-hover)] hover:bg-gradient-to-r hover:from-[var(--success)]/10 hover:to-transparent transition-all border-2 border-transparent hover:border-[var(--success)]/30",children:[(0,t.jsx)("div",{className:"w-5 h-5 bg-[var(--success)] rounded shadow-md"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:"DisponÃ­vel para compra"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-[var(--surface-hover)] hover:bg-gradient-to-r hover:from-[var(--warning)]/10 hover:to-transparent transition-all border-2 border-transparent hover:border-[var(--warning)]/30",children:[(0,t.jsx)("div",{className:"w-5 h-5 bg-[var(--warning)] rounded shadow-md"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:"Reservado"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-[var(--surface-hover)] hover:bg-gradient-to-r hover:from-[var(--danger)]/10 hover:to-transparent transition-all border-2 border-transparent hover:border-[var(--danger)]/30",children:[(0,t.jsx)("div",{className:"w-5 h-5 bg-[var(--danger)] rounded shadow-md"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-white",children:"Vendido"})]})]})]})]})]}),0===e.length&&(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-[var(--primary)]/20 rounded-full mb-4 shadow-md",children:(0,t.jsx)("svg",{className:"w-10 h-10 text-[var(--primary)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),(0,t.jsx)("p",{className:"text-white text-lg font-semibold",children:"Nenhum mapa disponÃ­vel no momento."})]}),m.length>0&&(0,t.jsx)("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 animate-slide-up",children:(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl shadow-2xl p-4 sm:p-5 flex flex-col sm:flex-row items-center gap-4 min-w-[300px] sm:min-w-[400px] border-2 border-blue-400/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-white/20 backdrop-blur-sm rounded-full w-10 h-10 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-bold text-lg",children:m.length})}),(0,t.jsxs)("div",{className:"text-white",children:[(0,t.jsx)("p",{className:"font-bold text-lg leading-tight",children:1===m.length?"1 Lote":`${m.length} Lotes`}),(0,t.jsxs)("p",{className:"text-white/80 text-sm",children:["Selecionado",m.length>1?"s":""]})]})]}),(0,t.jsx)("div",{className:"hidden sm:block w-px h-12 bg-white/20"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{onClick:j,className:"px-4 py-2.5 bg-white/10 hover:bg-white/20 text-white rounded-xl font-semibold transition-all duration-200 flex items-center gap-2 backdrop-blur-sm border border-white/20",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Limpar"]}),(0,t.jsxs)("button",{onClick:y,className:"px-6 py-2.5 bg-white text-blue-600 rounded-xl font-bold transition-all duration-200 hover:scale-105 hover:shadow-xl flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Enviar Reserva"]})]})]})}),h&&m.length>0&&(0,t.jsx)(n,{lots:m,onClose:N,onSuccess:w}),u&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:L,children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:`px-6 py-4 rounded-t-2xl ${u.status===i.LotStatus.AVAILABLE?"bg-gradient-to-r from-green-500 to-green-600":u.status===i.LotStatus.RESERVED?"bg-gradient-to-r from-amber-500 to-amber-600":u.status===i.LotStatus.BLOCKED?"bg-gradient-to-r from-gray-500 to-gray-700":"bg-gradient-to-r from-red-500 to-red-600"}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Lote ",u.lotNumber]}),(0,t.jsxs)("p",{className:"text-white/90 text-sm mt-1",children:[u.status===i.LotStatus.AVAILABLE&&"âœ“ DisponÃ­vel",u.status===i.LotStatus.RESERVED&&"ðŸ”’ Reservado",u.status===i.LotStatus.SOLD&&"âœ“ Vendido",u.status===i.LotStatus.BLOCKED&&"ðŸ”’ Bloqueado"]})]}),(0,t.jsx)("button",{onClick:L,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[u.status!==i.LotStatus.AVAILABLE&&(0,t.jsx)("div",{className:`rounded-xl p-4 border-2 ${u.status===i.LotStatus.RESERVED?"bg-amber-50 border-amber-300":u.status===i.LotStatus.SOLD?"bg-red-50 border-red-300":u.status===i.LotStatus.BLOCKED?"bg-gray-200 border-gray-400":"bg-gray-100 border-gray-300"}`,children:(0,t.jsxs)("p",{className:`text-sm font-medium ${u.status===i.LotStatus.RESERVED?"text-amber-800":u.status===i.LotStatus.SOLD?"text-red-800":"text-gray-700"}`,children:[u.status===i.LotStatus.RESERVED&&"âš ï¸ Este lote estÃ¡ reservado.",u.status===i.LotStatus.SOLD&&"âœ“ Este lote foi vendido.",u.status===i.LotStatus.BLOCKED&&"â›” Este lote estÃ¡ bloqueado e nÃ£o pode ser reservado."]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"NÃºmero do Lote"}),(0,t.jsx)("p",{className:"text-xl font-bold text-gray-900",children:u.lotNumber})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Status"}),(0,t.jsxs)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${u.status===i.LotStatus.AVAILABLE?"bg-green-100 text-green-800":u.status===i.LotStatus.RESERVED?"bg-amber-100 text-amber-800":u.status===i.LotStatus.SOLD?"bg-red-100 text-red-800":"bg-gray-200 text-gray-700"}`,children:[u.status===i.LotStatus.AVAILABLE&&"DisponÃ­vel",u.status===i.LotStatus.RESERVED&&"Reservado",u.status===i.LotStatus.SOLD&&"Vendido",u.status===i.LotStatus.BLOCKED&&"Bloqueado"]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Ãrea"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[u.size," mÂ²"]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"PreÃ§o Total"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["R$ ",u.price.toLocaleString("pt-BR")]}),u.pricePerM2&&(0,t.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["R$ ",u.pricePerM2.toLocaleString("pt-BR"),"/mÂ²"]})]})]}),u.description&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-2",children:"DescriÃ§Ã£o"}),(0,t.jsx)("p",{className:"text-gray-900 leading-relaxed",children:u.description})]}),u.features&&u.features.length>0&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-3",children:"CaracterÃ­sticas"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:u.features.map((e,r)=>(0,t.jsx)("span",{className:"px-3 py-1.5 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded-lg",children:e},r))})]}),u.area.points.length>0&&(0,t.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Ãrea Desenhada"}),(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:["âœ“ ",u.area.points.length," pontos definidos no mapa"]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 px-6 py-4 rounded-b-2xl flex justify-between items-center gap-3",children:[(0,t.jsx)("button",{onClick:L,className:"px-6 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Fechar"}),u.status===i.LotStatus.AVAILABLE&&(0,t.jsx)("button",{onClick:()=>{v(u),L()},className:`px-6 py-2.5 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center gap-2 ${S(u.id)?"bg-red-500 hover:bg-red-600 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:S(u.id)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Remover da Lista"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Ã  Lista"]})})]})]})})]})}e.s(["default",()=>m],47610)}]);