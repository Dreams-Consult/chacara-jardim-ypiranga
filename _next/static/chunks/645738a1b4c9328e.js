(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20383,e=>{"use strict";var s=e.i(47167),t=e.i(43476),a=e.i(71645),l=e.i(18566),r=e.i(81949),i=e.i(73297),d=e.i(83642);let n=s.default.env.NEXT_PUBLIC_API_URL||"";function o(){let e=(0,l.useRouter)(),{user:s}=(0,d.useAuth)(),[o,c]=(0,a.useState)([]),[m,x]=(0,a.useState)([]),[h,u]=(0,a.useState)(!0),j=async()=>{try{u(!0);let e=await r.default.get(`${n}/mapas`,{timeout:1e4}),s=(Array.isArray(e.data)?e.data:[]).map(e=>({id:e.mapId,name:e.name,description:e.description||"",imageUrl:e.imageUrl||"",imageType:"image",width:e.width||800,height:e.height||600,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));c(s);let t=s.map(async e=>{try{let s=await r.default.get(`${n}/mapas/lotes`,{params:{mapId:e.id},timeout:1e4}),t=s.data?.[0];if(t?.lots&&Array.isArray(t.lots))return t.lots.map(s=>{let t=s.area;if(s.area&&"string"==typeof s.area.points)try{t={...s.area,points:JSON.parse(s.area.points)}}catch(e){console.error("Erro ao parsear area.points:",e)}return{...s,area:t,mapId:e.id,createdAt:new Date(s.createdAt),updatedAt:new Date(s.updatedAt)}});return[]}catch(s){return console.error(`Erro ao carregar lotes do mapa ${e.id}:`,s),[]}}),a=(await Promise.all(t)).flat();x(a)}catch(e){console.error("Erro ao carregar dados do dashboard:",e)}finally{u(!1)}};if((0,a.useEffect)(()=>{if(s?.role===i.UserRole.VENDEDOR){console.log("⚠️ Vendedor não tem acesso ao dashboard - redirecionando"),e.push("/admin/maps");return}},[s,e]),(0,a.useEffect)(()=>{s?.role!==i.UserRole.VENDEDOR&&j()},[s]),s?.role===i.UserRole.VENDEDOR)return null;let f=m.length,p=m.filter(e=>e.status===i.LotStatus.AVAILABLE).length,v=m.filter(e=>e.status===i.LotStatus.RESERVED).length,w=m.filter(e=>e.status===i.LotStatus.SOLD).length,g=m.filter(e=>e.status===i.LotStatus.BLOCKED).length,b=m.reduce((e,s)=>e+s.price,0),N=m.filter(e=>e.status===i.LotStatus.AVAILABLE).reduce((e,s)=>e+s.price,0),y=m.filter(e=>e.status===i.LotStatus.SOLD).reduce((e,s)=>e+s.price,0);return h?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-[var(--primary)] rounded-full mb-4 animate-pulse shadow-[var(--shadow-lg)]",children:(0,t.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,t.jsx)("p",{className:"text-white text-lg font-semibold",children:"Carregando dashboard..."})]})})}):(console.log(o),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Dashboard"}),(0,t.jsx)("p",{className:"text-white/70",children:"Visão geral de todos os mapas e lotes"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 shadow-[var(--shadow-lg)]",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})})}),(0,t.jsx)("p",{className:"text-white/90 text-sm font-medium mb-1",children:"Total de Mapas"}),(0,t.jsx)("p",{className:"text-white text-4xl font-bold",children:o.length})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 shadow-[var(--shadow-lg)]",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})})}),(0,t.jsx)("p",{className:"text-white/90 text-sm font-medium mb-1",children:"Total de Lotes"}),(0,t.jsx)("p",{className:"text-white text-4xl font-bold",children:f})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-2xl p-6 shadow-[var(--shadow-lg)] border-2 border-yellow-300",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-yellow-300/30 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-yellow-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 11-12.728 0M12 9v2m0 4h.01"})})})}),(0,t.jsx)("p",{className:"text-yellow-900/90 text-sm font-medium mb-1",children:"Lotes Reservados"}),(0,t.jsx)("p",{className:"text-yellow-900 text-4xl font-bold",children:v})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 shadow-[var(--shadow-lg)]",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,t.jsx)("p",{className:"text-white/90 text-sm font-medium mb-1",children:"Lotes Disponíveis"}),(0,t.jsx)("p",{className:"text-white text-4xl font-bold",children:p})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-2xl p-6 shadow-[var(--shadow-lg)]",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,t.jsx)("p",{className:"text-white/90 text-sm font-medium mb-1",children:"Lotes Vendidos"}),(0,t.jsx)("p",{className:"text-white text-4xl font-bold",children:w})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-gray-500 to-gray-700 rounded-2xl p-6 shadow-[var(--shadow-lg)]",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a5 5 0 00-10 0v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2z"})})})}),(0,t.jsx)("p",{className:"text-white/90 text-sm font-medium mb-1",children:"Lotes Bloqueados"}),(0,t.jsx)("p",{className:"text-white text-4xl font-bold",children:g})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"bg-[var(--card-bg)] rounded-2xl p-6 shadow-[var(--shadow-lg)]",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Distribuição por Status"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-white font-medium",children:"Disponível"})]}),(0,t.jsxs)("span",{className:"text-white font-bold",children:[p," (",f>0?(p/f*100).toFixed(1):0,"%)"]})]}),(0,t.jsx)("div",{className:"w-full bg-[var(--surface)] rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-green-500 h-3 rounded-full transition-all",style:{width:`${f>0?p/f*100:0}%`}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,t.jsx)("span",{className:"text-white font-medium",children:"Reservado"})]}),(0,t.jsxs)("span",{className:"text-white font-bold",children:[v," (",f>0?(v/f*100).toFixed(1):0,"%)"]})]}),(0,t.jsx)("div",{className:"w-full bg-[var(--surface)] rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-yellow-500 h-3 rounded-full transition-all",style:{width:`${f>0?v/f*100:0}%`}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,t.jsx)("span",{className:"text-white font-medium",children:"Vendido"})]}),(0,t.jsxs)("span",{className:"text-white font-bold",children:[w," (",f>0?(w/f*100).toFixed(1):0,"%)"]})]}),(0,t.jsx)("div",{className:"w-full bg-[var(--surface)] rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-red-500 h-3 rounded-full transition-all",style:{width:`${f>0?w/f*100:0}%`}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),(0,t.jsx)("span",{className:"text-white font-medium",children:"Bloqueado"})]}),(0,t.jsxs)("span",{className:"text-white font-bold",children:[g," (",f>0?(g/f*100).toFixed(1):0,"%)"]})]}),(0,t.jsx)("div",{className:"w-full bg-[var(--surface)] rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-gray-500 h-3 rounded-full transition-all",style:{width:`${f>0?g/f*100:0}%`}})})]})]})]}),(0,t.jsxs)("div",{className:"bg-[var(--card-bg)] rounded-2xl p-6 shadow-[var(--shadow-lg)]",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Valores Financeiros"]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-[var(--primary)]/20 to-[var(--primary-light)]/20 border border-[var(--primary)]/30 rounded-xl p-4",children:[(0,t.jsx)("p",{className:"text-white/70 text-sm font-medium mb-1",children:"Valor Total dos Lotes"}),(0,t.jsxs)("p",{className:"text-white text-3xl font-bold",children:["R$ ",b.toLocaleString("pt-BR")]})]}),(0,t.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-4",children:[(0,t.jsx)("p",{className:"text-white/70 text-sm font-medium mb-1",children:"Disponível para Venda"}),(0,t.jsxs)("p",{className:"text-white text-2xl font-bold",children:["R$ ",N.toLocaleString("pt-BR")]})]}),(0,t.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4",children:[(0,t.jsx)("p",{className:"text-white/70 text-sm font-medium mb-1",children:"Valor Já Vendido"}),(0,t.jsxs)("p",{className:"text-white text-2xl font-bold",children:["R$ ",y.toLocaleString("pt-BR")]})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-[var(--card-bg)] rounded-2xl p-6 shadow-[var(--shadow-lg)]",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Mapas Cadastrados"]}),0===o.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[var(--surface)] rounded-full mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),(0,t.jsx)("p",{className:"text-white/70 text-lg",children:"Nenhum mapa cadastrado"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>{let s=m.filter(s=>s.mapId===e.id),a=s.filter(e=>e.status===i.LotStatus.AVAILABLE).length,l=s.filter(e=>e.status===i.LotStatus.RESERVED).length,r=s.filter(e=>e.status===i.LotStatus.SOLD).length,d=s.filter(e=>e.status===i.LotStatus.BLOCKED).length;return(0,t.jsxs)("div",{className:"bg-[var(--surface)] rounded-xl p-5 border border-[var(--border)] hover:shadow-[var(--shadow-md)] transition-all",children:[(0,t.jsx)("h3",{className:"text-white font-bold text-lg mb-3",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-white/70 text-sm mb-4 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-white/70",children:"Total de Lotes:"}),(0,t.jsx)("span",{className:"text-white font-bold",children:s.length})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-green-400",children:"Disponíveis:"}),(0,t.jsx)("span",{className:"text-green-400 font-bold",children:a})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-yellow-400",children:"Reservados:"}),(0,t.jsx)("span",{className:"text-yellow-400 font-bold",children:l})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-red-400",children:"Vendidos:"}),(0,t.jsx)("span",{className:"text-red-400 font-bold",children:r})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Bloqueados:"}),(0,t.jsx)("span",{className:"text-gray-500 font-bold",children:d})]})]})]},e.id)})})]})]}))}e.s(["default",()=>o])}]);